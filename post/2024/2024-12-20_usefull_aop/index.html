<!DOCTYPE html>
<html lang="ko-KR"><head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="description" content="Gyuha blog '유용한 Aspect-Oriented Programming(AOP) 모음'" />
  <title>유용한 Aspect-Oriented Programming(AOP) 모음  | 신규하 블로그</title>
  <meta property="og:title" content="유용한 Aspect-Oriented Programming(AOP) 모음" />
  
  <meta property="og:type" content="article" />
  <meta property="article:published_time" content="2024-12-20"> 
  <meta property="og:url" content="https://gyuha.com/post/2024/2024-12-20_usefull_aop/" />
  <meta property="og:site_name" content="신규하 블로그" />
   <meta property="og:image" content="https://gyuha.com/images/thumbnail.png">  
  <meta property="og:tags" content="Spring" />
  
  <meta property="og:tags" content="annotation" />
  

  
  <link rel="icon" href="/favicon.ico" type="image/x-icon" />

  
  <link rel="stylesheet" href="/vendor/bootstrap/bootstrap.min.css" /> <link rel="stylesheet" href="/vendor/magnific-popup/magnific-popup.css" /> <link rel="stylesheet" href="/vendor/wow/animate.css" /> <link rel="stylesheet" href="/css/style.css" />
</head>
<body>
<header class="header-area">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <nav class="navbar navbar-expand-lg">
          
          <a class="navbar-brand" href='/'>
            <img src="/img/logo-title.png" alt="Logo" />
          </a>
          
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#nav" aria-controls="nav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          
          <div class="collapse navbar-collapse" id="nav">
            <ul class="navbar-nav ml-auto">
              <li class="nav-item">
                <a class="nav-link" href='/'>블로그</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href='/categories'>카테고리</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href='/tags'>태그</a>
              </li>
            </ul>
            
            <div id="search-wrapper">
              <form action='/search/' method="get">
                <input type="search" placeholder='검색어' name="q" class="search">
                <i class="fa fa-search search-trigger" aria-hidden="true"></i>
              </form>
              </div>
            </div>
          </div>
        </nav>
      </div>
    </div>
  </div>
</header>

<div class="top-area">
  <div class="top-video top-video-small ">
    <div id="waves" class="video"></div>
    <div class="container">
      <div class="title-message">
        
        <a href="https://gyuha.com/post/2024/2024-12-20_usefull_aop/">
          <h1>
            유용한 Aspect-Oriented Programming(AOP) 모음
          </h1>
        </a>
        
      </div>
    </div>
  </div>
</div>
<div class="container">
      <div class="row justify-content-center">
        <div class="col-12 col-lg-8">

<div class="post-title">
  <a href="https://gyuha.com/post/2024/2024-12-20_usefull_aop/">
    <div class="post-meta">
      <time></time>
    </div>
  </a>
</div>
<section class="post-content">
  
  <p>Aspect-Oriented Programming(AOP)은 Spring에서 횡단 관심사를 처리하기 위한 강력한 도구입니다.</p>
<p>AOP를 활용하면 애플리케이션의 주요 비즈니스 로직을 간결하게 유지하면서도, 반복적인 작업을 쉽게 처리할 수 있습니다. 아래는 Spring AOP를 활용해 구현할 수 있는 몇 가지 유용한 기능과 구현 예제입니다.</p>
<hr>
<h2 id="1-로깅-logging"><strong>1. 로깅 (Logging)</strong></h2>
<p>메서드의 입력값, 출력값, 실행 시간을 로깅하는 기능.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">LoggingAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#57606a">// com.example 패키지의 모든 메서드</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">logMethodDetails</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Method &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; called with args: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>Arrays<span style="color:#1f2328">.</span><span style="color:#1f2328">toString</span><span style="color:#1f2328">(</span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getArgs</span><span style="color:#1f2328">()));</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>Object<span style="color:#fff"> </span>result<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Method &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; returned: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>result<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>result<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="2-보안-검사-security-check"><strong>2. 보안 검사 (Security Check)</strong></h2>
<p>메서드 실행 전 사용자의 인증 및 권한을 검사하는 기능.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">SecurityAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Before</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;@annotation(com.example.annotations.SecureAction)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#57606a">// 특정 어노테이션이 붙은 메서드만</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">checkSecurity</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 예: 현재 사용자의 권한을 확인</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">boolean</span><span style="color:#fff"> </span>hasPermission<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>SecurityContextHolder<span style="color:#1f2328">.</span><span style="color:#1f2328">getContext</span><span style="color:#1f2328">().</span><span style="color:#1f2328">getAuthentication</span><span style="color:#1f2328">().</span><span style="color:#1f2328">isAuthenticated</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#0550ae">!</span>hasPermission<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">throw</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>SecurityException<span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;User not authorized!&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;User is authorized&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="3-트랜잭션-관리-custom-transaction-management"><strong>3. 트랜잭션 관리 (Custom Transaction Management)</strong></h2>
<p>Spring의 기본 트랜잭션 외에, 특정 작업에서 커스텀 트랜잭션 처리를 추가.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">TransactionManagementAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;@annotation(org.springframework.transaction.annotation.Transactional)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">manageTransaction</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Transaction started&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">try</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>Object<span style="color:#fff"> </span>result<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Transaction committed&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>result<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff"> </span><span style="color:#cf222e">catch</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>Exception<span style="color:#fff"> </span>ex<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Transaction rolled back&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">throw</span><span style="color:#fff"> </span>ex<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="4-캐싱-caching"><strong>4. 캐싱 (Caching)</strong></h2>
<p>결과를 캐싱하여 메서드 호출을 최적화.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">CachingAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span>Map<span style="color:#0550ae">&lt;</span>String<span style="color:#1f2328">,</span><span style="color:#fff"> </span>Object<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span>cache<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>HashMap<span style="color:#0550ae">&lt;&gt;</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;@annotation(com.example.annotations.Cached)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">cacheResult</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>String<span style="color:#fff"> </span>key<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">().</span><span style="color:#1f2328">toString</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>Arrays<span style="color:#1f2328">.</span><span style="color:#1f2328">toString</span><span style="color:#1f2328">(</span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getArgs</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>cache<span style="color:#1f2328">.</span><span style="color:#1f2328">containsKey</span><span style="color:#1f2328">(</span>key<span style="color:#1f2328">))</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Cache hit for key: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>key<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>cache<span style="color:#1f2328">.</span><span style="color:#1f2328">get</span><span style="color:#1f2328">(</span>key<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Cache miss for key: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>key<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>Object<span style="color:#fff"> </span>result<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>cache<span style="color:#1f2328">.</span><span style="color:#1f2328">put</span><span style="color:#1f2328">(</span>key<span style="color:#1f2328">,</span><span style="color:#fff"> </span>result<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>result<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="5-예외-처리-global-exception-handling"><strong>5. 예외 처리 (Global Exception Handling)</strong></h2>
<p>특정 패키지의 메서드에서 발생한 예외를 중앙에서 처리.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">ExceptionHandlingAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@AfterThrowing</span><span style="color:#1f2328">(</span>pointcut<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;execution(* com.example..*(..))&#34;</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span>throwing<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;ex&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">handleException</span><span style="color:#1f2328">(</span>JoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">,</span><span style="color:#fff"> </span>Exception<span style="color:#fff"> </span>ex<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">err</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Exception in method &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>ex<span style="color:#1f2328">.</span><span style="color:#1f2328">getMessage</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 로그 저장 또는 알림 전송</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="6-메트릭-수집-metrics-collection"><strong>6. 메트릭 수집 (Metrics Collection)</strong></h2>
<p>메서드 호출 횟수, 평균 실행 시간을 수집하여 성능 모니터링.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">MetricsAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span>Map<span style="color:#0550ae">&lt;</span>String<span style="color:#1f2328">,</span><span style="color:#fff"> </span>Long<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span>executionCount<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>HashMap<span style="color:#0550ae">&lt;&gt;</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span>Map<span style="color:#0550ae">&lt;</span>String<span style="color:#1f2328">,</span><span style="color:#fff"> </span>Long<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span>totalTime<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>HashMap<span style="color:#0550ae">&lt;&gt;</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">collectMetrics</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>String<span style="color:#fff"> </span>methodName<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">().</span><span style="color:#1f2328">toString</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">long</span><span style="color:#fff"> </span>start<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">currentTimeMillis</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>Object<span style="color:#fff"> </span>result<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">long</span><span style="color:#fff"> </span>duration<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">currentTimeMillis</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#0550ae">-</span><span style="color:#fff"> </span>start<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>executionCount<span style="color:#1f2328">.</span><span style="color:#1f2328">put</span><span style="color:#1f2328">(</span>methodName<span style="color:#1f2328">,</span><span style="color:#fff"> </span>executionCount<span style="color:#1f2328">.</span><span style="color:#1f2328">getOrDefault</span><span style="color:#1f2328">(</span>methodName<span style="color:#1f2328">,</span><span style="color:#fff"> </span>0L<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>1<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>totalTime<span style="color:#1f2328">.</span><span style="color:#1f2328">put</span><span style="color:#1f2328">(</span>methodName<span style="color:#1f2328">,</span><span style="color:#fff"> </span>totalTime<span style="color:#1f2328">.</span><span style="color:#1f2328">getOrDefault</span><span style="color:#1f2328">(</span>methodName<span style="color:#1f2328">,</span><span style="color:#fff"> </span>0L<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>duration<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Method &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>methodName<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; called &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>executionCount<span style="color:#1f2328">.</span><span style="color:#1f2328">get</span><span style="color:#1f2328">(</span>methodName<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; times&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Average execution time: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>totalTime<span style="color:#1f2328">.</span><span style="color:#1f2328">get</span><span style="color:#1f2328">(</span>methodName<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#0550ae">/</span><span style="color:#fff"> </span>executionCount<span style="color:#1f2328">.</span><span style="color:#1f2328">get</span><span style="color:#1f2328">(</span>methodName<span style="color:#1f2328">))</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; ms&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>result<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="7-입력값-검증-validation"><strong>7. 입력값 검증 (Validation)</strong></h2>
<p>메서드 호출 전에 입력값이 유효한지 검증.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">ValidationAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Before</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;@annotation(com.example.annotations.ValidateInput)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">validateInputs</span><span style="color:#1f2328">(</span>JoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>Object<span style="color:#0550ae">[]</span><span style="color:#fff"> </span>args<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getArgs</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>Object<span style="color:#fff"> </span>arg<span style="color:#fff"> </span><span style="color:#1f2328">:</span><span style="color:#fff"> </span>args<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>arg<span style="color:#fff"> </span><span style="color:#0550ae">==</span><span style="color:#fff"> </span><span style="color:#cf222e">null</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#cf222e">throw</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>IllegalArgumentException<span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Null value not allowed for arguments!&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;All inputs are valid&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><p>여기에는 Spring AOP를 활용하여 더 다양한 유용한 기능을 구현한 예제를 소개합니다. 각 기능은 프로젝트에 따라 확장 가능하며, 비즈니스 요구사항에 따라 활용될 수 있습니다.</p>
<hr>
<h2 id="8-요청-데이터-암호화-및-복호화"><strong>8. 요청 데이터 암호화 및 복호화</strong></h2>
<p>API 요청 데이터나 응답 데이터를 암호화/복호화하여 보안성을 강화.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">EncryptionAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">static</span><span style="color:#fff"> </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span>String<span style="color:#fff"> </span>SECRET_KEY<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;my-secret-key&#34;</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;@annotation(com.example.annotations.EncryptData)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">encryptAndDecrypt</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>Object<span style="color:#0550ae">[]</span><span style="color:#fff"> </span>args<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getArgs</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 암호화된 데이터로 변경</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>args<span style="color:#1f2328">.</span><span style="color:#1f2328">length</span><span style="color:#1f2328">;</span><span style="color:#fff"> </span>i<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>args<span style="color:#0550ae">[</span>i<span style="color:#0550ae">]</span><span style="color:#fff"> </span><span style="color:#cf222e">instanceof</span><span style="color:#fff"> </span>String<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span>args<span style="color:#0550ae">[</span>i<span style="color:#0550ae">]</span><span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>encrypt<span style="color:#1f2328">((</span>String<span style="color:#1f2328">)</span><span style="color:#fff"> </span>args<span style="color:#0550ae">[</span>i<span style="color:#0550ae">]</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Arguments encrypted: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>Arrays<span style="color:#1f2328">.</span><span style="color:#1f2328">toString</span><span style="color:#1f2328">(</span>args<span style="color:#1f2328">));</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 메서드 실행</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>Object<span style="color:#fff"> </span>result<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">(</span>args<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 복호화된 결과 반환</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>result<span style="color:#fff"> </span><span style="color:#cf222e">instanceof</span><span style="color:#fff"> </span>String<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>result<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>decrypt<span style="color:#1f2328">((</span>String<span style="color:#1f2328">)</span><span style="color:#fff"> </span>result<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Result decrypted: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>result<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>result<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span>String<span style="color:#fff"> </span><span style="color:#6639ba">encrypt</span><span style="color:#1f2328">(</span>String<span style="color:#fff"> </span>data<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 간단한 암호화 로직 (예시)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>Base64<span style="color:#1f2328">.</span><span style="color:#1f2328">getEncoder</span><span style="color:#1f2328">().</span><span style="color:#1f2328">encodeToString</span><span style="color:#1f2328">((</span>data<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>SECRET_KEY<span style="color:#1f2328">).</span><span style="color:#1f2328">getBytes</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span>String<span style="color:#fff"> </span><span style="color:#6639ba">decrypt</span><span style="color:#1f2328">(</span>String<span style="color:#fff"> </span>data<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 간단한 복호화 로직 (예시)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>String<span style="color:#fff"> </span>decoded<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>String<span style="color:#1f2328">(</span>Base64<span style="color:#1f2328">.</span><span style="color:#1f2328">getDecoder</span><span style="color:#1f2328">().</span><span style="color:#1f2328">decode</span><span style="color:#1f2328">(</span>data<span style="color:#1f2328">));</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>decoded<span style="color:#1f2328">.</span><span style="color:#1f2328">replace</span><span style="color:#1f2328">(</span>SECRET_KEY<span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="9-api-호출-제한-rate-limiting"><strong>9. API 호출 제한 (Rate Limiting)</strong></h2>
<p>특정 사용자가 API를 과도하게 호출하지 않도록 제한.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">RateLimitingAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span>Map<span style="color:#0550ae">&lt;</span>String<span style="color:#1f2328">,</span><span style="color:#fff"> </span>Integer<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span>userRequestCounts<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>HashMap<span style="color:#0550ae">&lt;&gt;</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">static</span><span style="color:#fff"> </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>LIMIT<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>5<span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#57606a">// 요청 제한</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Before</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;@annotation(com.example.annotations.RateLimited)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">enforceRateLimit</span><span style="color:#1f2328">(</span>JoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>String<span style="color:#fff"> </span>userId<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>getCurrentUserId<span style="color:#1f2328">();</span><span style="color:#fff"> </span><span style="color:#57606a">// 사용자 ID 가져오기 (가정)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>userRequestCounts<span style="color:#1f2328">.</span><span style="color:#1f2328">put</span><span style="color:#1f2328">(</span>userId<span style="color:#1f2328">,</span><span style="color:#fff"> </span>userRequestCounts<span style="color:#1f2328">.</span><span style="color:#1f2328">getOrDefault</span><span style="color:#1f2328">(</span>userId<span style="color:#1f2328">,</span><span style="color:#fff"> </span>0<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>1<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>userRequestCounts<span style="color:#1f2328">.</span><span style="color:#1f2328">get</span><span style="color:#1f2328">(</span>userId<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span>LIMIT<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">throw</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>RuntimeException<span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Rate limit exceeded for user: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>userId<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Request allowed for user: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>userId<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span>String<span style="color:#fff"> </span><span style="color:#6639ba">getCurrentUserId</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 현재 사용자 ID를 가져오는 로직 (예: 보안 컨텍스트)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;user123&#34;</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="10-메서드-리트라이-retry"><strong>10. 메서드 리트라이 (Retry)</strong></h2>
<p>실패한 메서드 호출을 일정 횟수까지 재시도.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">RetryAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;@annotation(com.example.annotations.Retryable)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">retry</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>maxRetries<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>3<span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#57606a">// 최대 재시도 횟수</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>attempts<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">while</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">true</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">try</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">();</span><span style="color:#fff"> </span><span style="color:#57606a">// 메서드 실행</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#1f2328">}</span><span style="color:#fff"> </span><span style="color:#cf222e">catch</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>Exception<span style="color:#fff"> </span>ex<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span>attempts<span style="color:#0550ae">++</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Attempt &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>attempts<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; failed&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>attempts<span style="color:#fff"> </span><span style="color:#0550ae">&gt;=</span><span style="color:#fff"> </span>maxRetries<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                    </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Max retries reached&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                    </span><span style="color:#cf222e">throw</span><span style="color:#fff"> </span>ex<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="11-감사-로깅-audit-logging"><strong>11. 감사 로깅 (Audit Logging)</strong></h2>
<p>중요한 작업(예: 데이터베이스 변경)을 기록하여 감사를 가능하게 함.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">AuditLoggingAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@After</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;@annotation(com.example.annotations.AuditLog)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">logAuditDetails</span><span style="color:#1f2328">(</span>JoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>String<span style="color:#fff"> </span>methodName<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">().</span><span style="color:#1f2328">toShortString</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>String<span style="color:#fff"> </span>userName<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>getCurrentUserName<span style="color:#1f2328">();</span><span style="color:#fff"> </span><span style="color:#57606a">// 현재 사용자 가져오기 (가정)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;User &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>userName<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; executed &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>methodName<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 로그 저장 또는 DB에 기록</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span>String<span style="color:#fff"> </span><span style="color:#6639ba">getCurrentUserName</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 현재 사용자 이름을 반환 (예: 보안 컨텍스트)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;admin&#34;</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="12-메서드-호출-알림-notification"><strong>12. 메서드 호출 알림 (Notification)</strong></h2>
<p>특정 메서드가 호출되었을 때 알림을 전송.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">NotificationAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@After</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;@annotation(com.example.annotations.NotifyOnCall)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">sendNotification</span><span style="color:#1f2328">(</span>JoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>String<span style="color:#fff"> </span>methodName<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">().</span><span style="color:#1f2328">toShortString</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Notification: Method &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>methodName<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; was called&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 알림 전송 (예: 이메일, SMS, 슬랙)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="13-요청-추적-request-tracing"><strong>13. 요청 추적 (Request Tracing)</strong></h2>
<p>모든 요청을 추적하여 디버깅 및 모니터링.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">RequestTracingAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Before</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.controller..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#57606a">// 컨트롤러의 모든 메서드</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">traceRequest</span><span style="color:#1f2328">(</span>JoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Request received for method: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Arguments: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>Arrays<span style="color:#1f2328">.</span><span style="color:#1f2328">toString</span><span style="color:#1f2328">(</span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getArgs</span><span style="color:#1f2328">()));</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="14-데이터-변경-이벤트-처리"><strong>14. 데이터 변경 이벤트 처리</strong></h2>
<p>데이터 변경 시 추가 작업(예: 캐시 무효화) 수행.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">DataChangeAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@AfterReturning</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;@annotation(com.example.annotations.OnDataChange)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">handleDataChange</span><span style="color:#1f2328">(</span>JoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Data change detected in method: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 캐시 무효화, 이벤트 전송 등의 작업 수행</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="15-성능-문제-감지-performance-monitoring"><strong>15. 성능 문제 감지 (Performance Monitoring)</strong></h2>
<p>특정 메서드에서 일정 시간을 초과하는 경우 경고를 출력.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">PerformanceMonitoringAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">static</span><span style="color:#fff"> </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span><span style="color:#cf222e">long</span><span style="color:#fff"> </span>WARNING_THRESHOLD<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>1000<span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#57606a">// 1초</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;@annotation(com.example.annotations.MonitorPerformance)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">monitorPerformance</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">long</span><span style="color:#fff"> </span>start<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">currentTimeMillis</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>Object<span style="color:#fff"> </span>result<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">long</span><span style="color:#fff"> </span>duration<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">currentTimeMillis</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#0550ae">-</span><span style="color:#fff"> </span>start<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>duration<span style="color:#fff"> </span><span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span>WARNING_THRESHOLD<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">err</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Performance warning: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; took &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>duration<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; ms&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff"> </span><span style="color:#cf222e">else</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; executed in &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>duration<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; ms&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>result<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="16-데이터베이스-슬로우-쿼리-탐지"><strong>16. 데이터베이스 슬로우 쿼리 탐지</strong></h2>
<p>SQL 실행 시간이 긴 경우 경고 로그를 남기거나 알림을 보냅니다.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">SlowQueryDetectorAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">static</span><span style="color:#fff"> </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span><span style="color:#cf222e">long</span><span style="color:#fff"> </span>SLOW_QUERY_THRESHOLD<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>2000<span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#57606a">// 2초</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.repository..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#57606a">// Repository 계층 감시</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">detectSlowQueries</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">long</span><span style="color:#fff"> </span>start<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">currentTimeMillis</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>Object<span style="color:#fff"> </span>result<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">long</span><span style="color:#fff"> </span>duration<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">currentTimeMillis</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#0550ae">-</span><span style="color:#fff"> </span>start<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>duration<span style="color:#fff"> </span><span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span>SLOW_QUERY_THRESHOLD<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">err</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Slow query detected: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; took &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>duration<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; ms&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>result<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="17-사용자-접근-로그-기록-access-logging"><strong>17. 사용자 접근 로그 기록 (Access Logging)</strong></h2>
<p>API 호출 시 사용자의 IP 주소, 요청 시간 등을 기록합니다.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">AccessLoggingAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Before</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.controller..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#57606a">// 모든 컨트롤러 메서드</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">logAccess</span><span style="color:#1f2328">(</span>JoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>String<span style="color:#fff"> </span>methodName<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">().</span><span style="color:#1f2328">toShortString</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>String<span style="color:#fff"> </span>ipAddress<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>getClientIp<span style="color:#1f2328">();</span><span style="color:#fff"> </span><span style="color:#57606a">// 클라이언트 IP 가져오기</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Access log: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>methodName<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; called from IP: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>ipAddress<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span>String<span style="color:#fff"> </span><span style="color:#6639ba">getClientIp</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// HttpServletRequest를 통해 IP 주소 가져오기</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;127.0.0.1&#34;</span><span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#57606a">// 예제용</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="18-조건부-실행-conditional-execution"><strong>18. 조건부 실행 (Conditional Execution)</strong></h2>
<p>특정 조건에서만 메서드를 실행하거나 무시합니다.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">ConditionalExecutionAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;@annotation(com.example.annotations.ConditionalRun)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">executeConditionally</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">boolean</span><span style="color:#fff"> </span>shouldRun<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>checkCondition<span style="color:#1f2328">();</span><span style="color:#fff"> </span><span style="color:#57606a">// 실행 조건 확인</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>shouldRun<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">();</span><span style="color:#fff"> </span><span style="color:#57606a">// 조건이 충족되면 실행</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff"> </span><span style="color:#cf222e">else</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Method &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; skipped due to condition&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span><span style="color:#cf222e">null</span><span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#57606a">// 실행하지 않음</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">boolean</span><span style="color:#fff"> </span><span style="color:#6639ba">checkCondition</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 조건 로직 (예: 특정 설정값 확인)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span><span style="color:#cf222e">false</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="19-메서드-호출-수-제한"><strong>19. 메서드 호출 수 제한</strong></h2>
<p>특정 메서드가 지정된 횟수 이상 호출되지 않도록 제한합니다.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">MethodCallLimiterAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span>Map<span style="color:#0550ae">&lt;</span>String<span style="color:#1f2328">,</span><span style="color:#fff"> </span>Integer<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span>methodCallCounts<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>HashMap<span style="color:#0550ae">&lt;&gt;</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">static</span><span style="color:#fff"> </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>MAX_CALLS<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>10<span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#57606a">// 최대 호출 횟수</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Before</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;@annotation(com.example.annotations.LimitedCall)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">limitMethodCalls</span><span style="color:#1f2328">(</span>JoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>String<span style="color:#fff"> </span>methodName<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">().</span><span style="color:#1f2328">toShortString</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>currentCount<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>methodCallCounts<span style="color:#1f2328">.</span><span style="color:#1f2328">getOrDefault</span><span style="color:#1f2328">(</span>methodName<span style="color:#1f2328">,</span><span style="color:#fff"> </span>0<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>currentCount<span style="color:#fff"> </span><span style="color:#0550ae">&gt;=</span><span style="color:#fff"> </span>MAX_CALLS<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">throw</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>RuntimeException<span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Method &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>methodName<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; has been called too many times&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>methodCallCounts<span style="color:#1f2328">.</span><span style="color:#1f2328">put</span><span style="color:#1f2328">(</span>methodName<span style="color:#1f2328">,</span><span style="color:#fff"> </span>currentCount<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>1<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Method &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>methodName<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; called &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>currentCount<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>1<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; times&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="20-사용자-id-태깅-user-id-tagging"><strong>20. 사용자 ID 태깅 (User ID Tagging)</strong></h2>
<p>로그나 메트릭에 현재 사용자 ID를 태깅하여 사용자별 모니터링을 제공합니다.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">UserIdTaggingAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Before</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.service..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#57606a">// 서비스 계층 메서드 감시</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">tagUserId</span><span style="color:#1f2328">(</span>JoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>String<span style="color:#fff"> </span>userId<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>getCurrentUserId<span style="color:#1f2328">();</span><span style="color:#fff"> </span><span style="color:#57606a">// 현재 사용자 ID 가져오기</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Tagging user ID: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>userId<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; for method: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span>String<span style="color:#fff"> </span><span style="color:#6639ba">getCurrentUserId</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 보안 컨텍스트에서 사용자 ID 가져오기</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;user123&#34;</span><span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#57606a">// 예제용</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="21-필드-마스킹-field-masking"><strong>21. 필드 마스킹 (Field Masking)</strong></h2>
<p>로그 출력 시 민감한 데이터를 마스킹합니다.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">FieldMaskingAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.service..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#57606a">// 서비스 계층 메서드 감시</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">maskSensitiveFields</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>Object<span style="color:#fff"> </span>result<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>result<span style="color:#fff"> </span><span style="color:#cf222e">instanceof</span><span style="color:#fff"> </span>String<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#57606a">// 민감한 데이터 마스킹 (예: 이메일, 카드 번호)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>result<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#1f2328">((</span>String<span style="color:#1f2328">)</span><span style="color:#fff"> </span>result<span style="color:#1f2328">).</span><span style="color:#1f2328">replaceAll</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;(?&lt;=.{2}).(?=.*@)&#34;</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;*&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>result<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="22-실행-환경-확인-environment-check"><strong>22. 실행 환경 확인 (Environment Check)</strong></h2>
<p>테스트 환경이나 프로덕션 환경에 따라 다른 동작을 수행.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">EnvironmentCheckAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;@annotation(com.example.annotations.EnvironmentSensitive)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">checkEnvironment</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>String<span style="color:#fff"> </span>currentEnv<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>getCurrentEnvironment<span style="color:#1f2328">();</span><span style="color:#fff"> </span><span style="color:#57606a">// 현재 환경 가져오기</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;prod&#34;</span><span style="color:#1f2328">.</span><span style="color:#1f2328">equals</span><span style="color:#1f2328">(</span>currentEnv<span style="color:#1f2328">))</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Executing in production&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff"> </span><span style="color:#cf222e">else</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Executing in non-production environment&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span>String<span style="color:#fff"> </span><span style="color:#6639ba">getCurrentEnvironment</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// Spring Environment에서 현재 프로파일 가져오기</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;dev&#34;</span><span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#57606a">// 예제용</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="23-특정-패키지-메서드-호출-차단"><strong>23. 특정 패키지 메서드 호출 차단</strong></h2>
<p>특정 패키지의 메서드가 호출되지 않도록 차단합니다.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">MethodBlockingAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Before</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.unallowed..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#57606a">// 금지된 패키지</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">blockMethodCall</span><span style="color:#1f2328">(</span>JoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">throw</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>RuntimeException<span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Method &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; is not allowed to be called&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="24-메서드-입력값-변환-input-transformation"><strong>24. 메서드 입력값 변환 (Input Transformation)</strong></h2>
<p>메서드 호출 전에 입력값을 변환.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">InputTransformationAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;@annotation(com.example.annotations.TransformInput)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">transformInput</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>Object<span style="color:#0550ae">[]</span><span style="color:#fff"> </span>args<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getArgs</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>args<span style="color:#1f2328">.</span><span style="color:#1f2328">length</span><span style="color:#1f2328">;</span><span style="color:#fff"> </span>i<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>args<span style="color:#0550ae">[</span>i<span style="color:#0550ae">]</span><span style="color:#fff"> </span><span style="color:#cf222e">instanceof</span><span style="color:#fff"> </span>String<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span>args<span style="color:#0550ae">[</span>i<span style="color:#0550ae">]</span><span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#1f2328">((</span>String<span style="color:#1f2328">)</span><span style="color:#fff"> </span>args<span style="color:#0550ae">[</span>i<span style="color:#0550ae">]</span><span style="color:#1f2328">).</span><span style="color:#1f2328">toUpperCase</span><span style="color:#1f2328">();</span><span style="color:#fff"> </span><span style="color:#57606a">// 입력값 대문자 변환</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Transformed arguments: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>Arrays<span style="color:#1f2328">.</span><span style="color:#1f2328">toString</span><span style="color:#1f2328">(</span>args<span style="color:#1f2328">));</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">(</span>args<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="25-메모리-사용-모니터링-memory-usage-monitoring"><strong>25. 메모리 사용 모니터링 (Memory Usage Monitoring)</strong></h2>
<p>메서드 실행 전후로 메모리 사용량을 기록.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">MemoryMonitoringAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;@annotation(com.example.annotations.MonitorMemory)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">monitorMemoryUsage</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>Runtime<span style="color:#fff"> </span>runtime<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>Runtime<span style="color:#1f2328">.</span><span style="color:#1f2328">getRuntime</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">long</span><span style="color:#fff"> </span>beforeMemory<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>runtime<span style="color:#1f2328">.</span><span style="color:#1f2328">totalMemory</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#0550ae">-</span><span style="color:#fff"> </span>runtime<span style="color:#1f2328">.</span><span style="color:#1f2328">freeMemory</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>Object<span style="color:#fff"> </span>result<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">long</span><span style="color:#fff"> </span>afterMemory<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>runtime<span style="color:#1f2328">.</span><span style="color:#1f2328">totalMemory</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#0550ae">-</span><span style="color:#fff"> </span>runtime<span style="color:#1f2328">.</span><span style="color:#1f2328">freeMemory</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Memory usage for method &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>afterMemory<span style="color:#fff"> </span><span style="color:#0550ae">-</span><span style="color:#fff"> </span>beforeMemory<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; bytes&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>result<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="26-api-요청-제한-속도-조정-dynamic-throttling"><strong>26. API 요청 제한 속도 조정 (Dynamic Throttling)</strong></h2>
<p>시스템 상태나 사용자 그룹에 따라 요청 속도를 동적으로 제한합니다.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">DynamicThrottlingAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span>Map<span style="color:#0550ae">&lt;</span>String<span style="color:#1f2328">,</span><span style="color:#fff"> </span>Long<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span>userLastRequestTime<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>HashMap<span style="color:#0550ae">&lt;&gt;</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">static</span><span style="color:#fff"> </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span><span style="color:#cf222e">long</span><span style="color:#fff"> </span>MIN_INTERVAL<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>1000<span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#57606a">// 최소 요청 간격 (1초)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Before</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;@annotation(com.example.annotations.Throttled)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">enforceThrottling</span><span style="color:#1f2328">(</span>JoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>String<span style="color:#fff"> </span>userId<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>getCurrentUserId<span style="color:#1f2328">();</span><span style="color:#fff"> </span><span style="color:#57606a">// 사용자 ID 가져오기</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">long</span><span style="color:#fff"> </span>currentTime<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">currentTimeMillis</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>userLastRequestTime<span style="color:#1f2328">.</span><span style="color:#1f2328">containsKey</span><span style="color:#1f2328">(</span>userId<span style="color:#1f2328">))</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">long</span><span style="color:#fff"> </span>lastRequestTime<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>userLastRequestTime<span style="color:#1f2328">.</span><span style="color:#1f2328">get</span><span style="color:#1f2328">(</span>userId<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>currentTime<span style="color:#fff"> </span><span style="color:#0550ae">-</span><span style="color:#fff"> </span>lastRequestTime<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>MIN_INTERVAL<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#cf222e">throw</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>RuntimeException<span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Too many requests for user: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>userId<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>userLastRequestTime<span style="color:#1f2328">.</span><span style="color:#1f2328">put</span><span style="color:#1f2328">(</span>userId<span style="color:#1f2328">,</span><span style="color:#fff"> </span>currentTime<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span>String<span style="color:#fff"> </span><span style="color:#6639ba">getCurrentUserId</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 예: 보안 컨텍스트에서 사용자 ID 가져오기</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;user123&#34;</span><span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#57606a">// 예제용</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="27-컨트롤러-응답-변환-response-transformation"><strong>27. 컨트롤러 응답 변환 (Response Transformation)</strong></h2>
<p>컨트롤러의 반환값을 동적으로 수정하여 사용자 맞춤 데이터를 반환합니다.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">ResponseTransformationAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@AfterReturning</span><span style="color:#1f2328">(</span>pointcut<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;execution(* com.example.controller..*(..))&#34;</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span>returning<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;response&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">transformResponse</span><span style="color:#1f2328">(</span>JoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">,</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span>response<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>response<span style="color:#fff"> </span><span style="color:#cf222e">instanceof</span><span style="color:#fff"> </span>String<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span><span style="color:#1f2328">((</span>String<span style="color:#1f2328">)</span><span style="color:#fff"> </span>response<span style="color:#1f2328">).</span><span style="color:#1f2328">toUpperCase</span><span style="color:#1f2328">();</span><span style="color:#fff"> </span><span style="color:#57606a">// 응답을 대문자로 변환</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>response<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="28-실시간-메트릭-수집-real-time-metrics-collection"><strong>28. 실시간 메트릭 수집 (Real-time Metrics Collection)</strong></h2>
<p>메서드 실행 데이터를 외부 모니터링 시스템으로 전송합니다.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">RealTimeMetricsAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@AfterReturning</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.service..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">sendMetricsToSystem</span><span style="color:#1f2328">(</span>JoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>String<span style="color:#fff"> </span>methodName<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">().</span><span style="color:#1f2328">toShortString</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Sending execution metrics for: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>methodName<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 외부 시스템에 메트릭 전송 (예: Prometheus, DataDog)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="29-사용자별-데이터-필터링"><strong>29. 사용자별 데이터 필터링</strong></h2>
<p>사용자 권한에 따라 반환되는 데이터를 필터링합니다.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">DataFilteringAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.service..*(..)) &amp;&amp; @annotation(com.example.annotations.FilteredData)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">filterDataForUser</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>Object<span style="color:#fff"> </span>result<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 사용자 권한에 따른 데이터 필터링</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>result<span style="color:#fff"> </span><span style="color:#cf222e">instanceof</span><span style="color:#fff"> </span>List<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>List<span style="color:#0550ae">&lt;?&gt;</span><span style="color:#fff"> </span>list<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>List<span style="color:#0550ae">&lt;?&gt;</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span>result<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>list<span style="color:#1f2328">.</span><span style="color:#1f2328">stream</span><span style="color:#1f2328">()</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                    </span><span style="color:#1f2328">.</span><span style="color:#1f2328">filter</span><span style="color:#1f2328">(</span>item<span style="color:#fff"> </span><span style="color:#0550ae">-&gt;</span><span style="color:#fff"> </span>userHasAccess<span style="color:#1f2328">(</span>item<span style="color:#1f2328">))</span><span style="color:#fff"> </span><span style="color:#57606a">// 사용자 접근 권한 필터</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                    </span><span style="color:#1f2328">.</span><span style="color:#1f2328">toList</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>result<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">boolean</span><span style="color:#fff"> </span><span style="color:#6639ba">userHasAccess</span><span style="color:#1f2328">(</span>Object<span style="color:#fff"> </span>item<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 접근 권한 로직</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span><span style="color:#cf222e">true</span><span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#57606a">// 예제용</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="30-메서드-파라미터-로그-제외-sensitive-logging"><strong>30. 메서드 파라미터 로그 제외 (Sensitive Logging)</strong></h2>
<p>특정 파라미터를 로그에서 제외하여 민감 정보를 보호합니다.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">SensitiveLoggingAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.service..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">excludeSensitiveParams</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>Object<span style="color:#0550ae">[]</span><span style="color:#fff"> </span>args<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getArgs</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>String<span style="color:#fff"> </span>methodName<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">().</span><span style="color:#1f2328">toShortString</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 민감 데이터 마스킹</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>Object<span style="color:#0550ae">[]</span><span style="color:#fff"> </span>sanitizedArgs<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>Arrays<span style="color:#1f2328">.</span><span style="color:#1f2328">stream</span><span style="color:#1f2328">(</span>args<span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#1f2328">.</span><span style="color:#1f2328">map</span><span style="color:#1f2328">(</span>arg<span style="color:#fff"> </span><span style="color:#0550ae">-&gt;</span><span style="color:#fff"> </span>arg<span style="color:#fff"> </span><span style="color:#cf222e">instanceof</span><span style="color:#fff"> </span>String<span style="color:#fff"> </span><span style="color:#0550ae">&amp;&amp;</span><span style="color:#fff"> </span>isSensitive<span style="color:#1f2328">(</span>arg<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#0550ae">?</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;****&#34;</span><span style="color:#fff"> </span><span style="color:#1f2328">:</span><span style="color:#fff"> </span>arg<span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#1f2328">.</span><span style="color:#1f2328">toArray</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Method &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>methodName<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; called with args: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>Arrays<span style="color:#1f2328">.</span><span style="color:#1f2328">toString</span><span style="color:#1f2328">(</span>sanitizedArgs<span style="color:#1f2328">));</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">boolean</span><span style="color:#fff"> </span><span style="color:#6639ba">isSensitive</span><span style="color:#1f2328">(</span>Object<span style="color:#fff"> </span>arg<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 민감 정보 판별 (예: 비밀번호, 카드 번호)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>arg<span style="color:#1f2328">.</span><span style="color:#1f2328">toString</span><span style="color:#1f2328">().</span><span style="color:#1f2328">matches</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;.*\\d{4}-\\d{4}-\\d{4}-\\d{4}.*&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff"> </span><span style="color:#57606a">// 카드 번호 예시</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="31-백그라운드-태스크-실행-background-task-execution"><strong>31. 백그라운드 태스크 실행 (Background Task Execution)</strong></h2>
<p>메서드 실행을 비동기로 처리하여 응답 속도를 높입니다.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">BackgroundTaskAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span>ExecutorService<span style="color:#fff"> </span>executorService<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>Executors<span style="color:#1f2328">.</span><span style="color:#1f2328">newCachedThreadPool</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;@annotation(com.example.annotations.BackgroundTask)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">executeInBackground</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>executorService<span style="color:#1f2328">.</span><span style="color:#1f2328">submit</span><span style="color:#1f2328">(()</span><span style="color:#fff"> </span><span style="color:#0550ae">-&gt;</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">try</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Executed in background: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#1f2328">}</span><span style="color:#fff"> </span><span style="color:#cf222e">catch</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>Throwable<span style="color:#fff"> </span>e<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span>e<span style="color:#1f2328">.</span><span style="color:#1f2328">printStackTrace</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">});</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="32-디버그-모드-활성화-debug-mode-toggle"><strong>32. 디버그 모드 활성화 (Debug Mode Toggle)</strong></h2>
<p>애플리케이션의 디버그 모드에서만 특정 로직을 실행합니다.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">DebugModeAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">static</span><span style="color:#fff"> </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span><span style="color:#cf222e">boolean</span><span style="color:#fff"> </span>DEBUG_MODE<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">true</span><span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#57606a">// 설정에 따라 변경 가능</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;@annotation(com.example.annotations.DebugOnly)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">executeInDebugMode</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>DEBUG_MODE<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Debug mode enabled for method: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff"> </span><span style="color:#cf222e">else</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Debug mode skipped for method: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span><span style="color:#cf222e">null</span><span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#57606a">// 디버그 모드가 아니면 실행 생략</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="33-캐시-삭제-후처리-post-cache-eviction-handling"><strong>33. 캐시 삭제 후처리 (Post Cache Eviction Handling)</strong></h2>
<p>캐시 삭제 후 추가 작업을 처리합니다.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">PostCacheEvictionAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@After</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;@annotation(org.springframework.cache.annotation.CacheEvict)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">handleCacheEviction</span><span style="color:#1f2328">(</span>JoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Cache evicted for method: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 캐시 삭제 후 작업 (예: 로깅, 알림)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="34-데이터-통합-검증-unified-data-validation"><strong>34. 데이터 통합 검증 (Unified Data Validation)</strong></h2>
<p>모든 데이터 입력에 대해 통합적으로 검증을 수행합니다.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">UnifiedValidationAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Before</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.controller..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">validateData</span><span style="color:#1f2328">(</span>JoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>Object<span style="color:#fff"> </span>arg<span style="color:#fff"> </span><span style="color:#1f2328">:</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getArgs</span><span style="color:#1f2328">())</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#0550ae">!</span>isValid<span style="color:#1f2328">(</span>arg<span style="color:#1f2328">))</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#cf222e">throw</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>IllegalArgumentException<span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Invalid argument: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>arg<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;All arguments are valid for method: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">boolean</span><span style="color:#fff"> </span><span style="color:#6639ba">isValid</span><span style="color:#1f2328">(</span>Object<span style="color:#fff"> </span>arg<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 데이터 유효성 검사 로직</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>arg<span style="color:#fff"> </span><span style="color:#0550ae">!=</span><span style="color:#fff"> </span><span style="color:#cf222e">null</span><span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#57606a">// 예제용</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="35-조건부-트랜잭션-관리-conditional-transaction-management"><strong>35. 조건부 트랜잭션 관리 (Conditional Transaction Management)</strong></h2>
<p>특정 조건에서만 트랜잭션을 활성화합니다.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">ConditionalTransactionAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;@annotation(org.springframework.transaction.annotation.Transactional)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">manageTransactionConditionally</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>shouldActivateTransaction<span style="color:#1f2328">())</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Transaction started for: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>Object<span style="color:#fff"> </span>result<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Transaction committed for: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>result<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff"> </span><span style="color:#cf222e">else</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Transaction skipped for: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">boolean</span><span style="color:#fff"> </span><span style="color:#6639ba">shouldActivateTransaction</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 트랜잭션 활성화 조건</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span><span style="color:#cf222e">true</span><span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#57606a">// 예제용</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="36-데이터-변경-알림-change-notification"><strong>36. 데이터 변경 알림 (Change Notification)</strong></h2>
<p>특정 데이터가 변경되었을 때 관리자에게 알림을 전송합니다.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">ChangeNotificationAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@AfterReturning</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;@annotation(com.example.annotations.NotifyChange)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">notifyOnChange</span><span style="color:#1f2328">(</span>JoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>String<span style="color:#fff"> </span>methodName<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">().</span><span style="color:#1f2328">toShortString</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Data change detected in method: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>methodName<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>sendNotification<span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Data has been changed in &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>methodName<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">sendNotification</span><span style="color:#1f2328">(</span>String<span style="color:#fff"> </span>message<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 이메일 또는 SMS 전송 로직</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Notification sent: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>message<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="37-캐시-프리로드-cache-preloading"><strong>37. 캐시 프리로드 (Cache Preloading)</strong></h2>
<p>애플리케이션 시작 시 특정 데이터를 캐시에 미리 로드합니다.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">CachePreloadingAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@PostConstruct</span><span style="color:#fff"> </span><span style="color:#57606a">// 애플리케이션 시작 시 호출</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">preloadCache</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Preloading cache...&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 캐시 초기화 로직</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>loadCache<span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;key1&#34;</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;value1&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>loadCache<span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;key2&#34;</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;value2&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">loadCache</span><span style="color:#1f2328">(</span>String<span style="color:#fff"> </span>key<span style="color:#1f2328">,</span><span style="color:#fff"> </span>String<span style="color:#fff"> </span>value<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 캐시에 데이터 로드</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Cached: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>key<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; -&gt; &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>value<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="38-특정-메서드-비활성화-method-deactivation"><strong>38. 특정 메서드 비활성화 (Method Deactivation)</strong></h2>
<p>관리자가 지정한 메서드를 비활성화하여 호출되지 않도록 합니다.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">MethodDeactivationAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">static</span><span style="color:#fff"> </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span>Set<span style="color:#0550ae">&lt;</span>String<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span>deactivatedMethods<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>Set<span style="color:#1f2328">.</span><span style="color:#1f2328">of</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;com.example.service.MyService.deactivatedMethod&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Before</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">blockDeactivatedMethods</span><span style="color:#1f2328">(</span>JoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>String<span style="color:#fff"> </span>methodName<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">().</span><span style="color:#1f2328">toString</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>deactivatedMethods<span style="color:#1f2328">.</span><span style="color:#1f2328">contains</span><span style="color:#1f2328">(</span>methodName<span style="color:#1f2328">))</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">throw</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>RuntimeException<span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Method &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>methodName<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; is currently deactivated&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="39-api-요청-경로-추적-request-path-tracing"><strong>39. API 요청 경로 추적 (Request Path Tracing)</strong></h2>
<p>모든 HTTP 요청의 경로를 추적하여 디버깅 정보를 출력합니다.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">RequestPathTracingAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Before</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* org.springframework.web.bind.annotation.RestController..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">traceRequestPath</span><span style="color:#1f2328">(</span>JoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>String<span style="color:#fff"> </span>path<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">().</span><span style="color:#1f2328">toShortString</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Request received for path: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>path<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="40-메서드-병렬-실행-parallel-execution"><strong>40. 메서드 병렬 실행 (Parallel Execution)</strong></h2>
<p>특정 메서드를 병렬로 실행하여 성능을 높입니다.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">ParallelExecutionAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span>ExecutorService<span style="color:#fff"> </span>executor<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>Executors<span style="color:#1f2328">.</span><span style="color:#1f2328">newFixedThreadPool</span><span style="color:#1f2328">(</span>10<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;@annotation(com.example.annotations.ParallelExecution)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">executeInParallel</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>executor<span style="color:#1f2328">.</span><span style="color:#1f2328">submit</span><span style="color:#1f2328">(()</span><span style="color:#fff"> </span><span style="color:#0550ae">-&gt;</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">try</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Executed in parallel: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#1f2328">}</span><span style="color:#fff"> </span><span style="color:#cf222e">catch</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>Throwable<span style="color:#fff"> </span>e<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span>e<span style="color:#1f2328">.</span><span style="color:#1f2328">printStackTrace</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">});</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span><span style="color:#cf222e">null</span><span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#57606a">// 병렬 실행이므로 결과를 즉시 반환</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="41-결과-데이터-포맷팅-result-formatting"><strong>41. 결과 데이터 포맷팅 (Result Formatting)</strong></h2>
<p>메서드 반환값을 JSON이나 XML 등 특정 형식으로 변환합니다.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">ResultFormattingAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@AfterReturning</span><span style="color:#1f2328">(</span>pointcut<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;@annotation(com.example.annotations.FormatResult)&#34;</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span>returning<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;result&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">formatResult</span><span style="color:#1f2328">(</span>JoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">,</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span>result<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>result<span style="color:#fff"> </span><span style="color:#0550ae">!=</span><span style="color:#fff"> </span><span style="color:#cf222e">null</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#57606a">// JSON 형식으로 변환</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>String<span style="color:#fff"> </span>jsonResult<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>toJson<span style="color:#1f2328">(</span>result<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Formatted result: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>jsonResult<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>jsonResult<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>result<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span>String<span style="color:#fff"> </span><span style="color:#6639ba">toJson</span><span style="color:#1f2328">(</span>Object<span style="color:#fff"> </span>result<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 간단한 JSON 변환 로직</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;{\&#34;data\&#34;: \&#34;&#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>result<span style="color:#1f2328">.</span><span style="color:#1f2328">toString</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;\&#34;}&#34;</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="42-실행-결과-캐싱-result-caching"><strong>42. 실행 결과 캐싱 (Result Caching)</strong></h2>
<p>메서드 실행 결과를 캐싱하여 동일한 요청에 대해 재사용합니다.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">ResultCachingAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span>Map<span style="color:#0550ae">&lt;</span>String<span style="color:#1f2328">,</span><span style="color:#fff"> </span>Object<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span>cache<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>HashMap<span style="color:#0550ae">&lt;&gt;</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;@annotation(com.example.annotations.Cacheable)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">cacheResult</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>String<span style="color:#fff"> </span>key<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>generateCacheKey<span style="color:#1f2328">(</span>joinPoint<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>cache<span style="color:#1f2328">.</span><span style="color:#1f2328">containsKey</span><span style="color:#1f2328">(</span>key<span style="color:#1f2328">))</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Cache hit for key: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>key<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>cache<span style="color:#1f2328">.</span><span style="color:#1f2328">get</span><span style="color:#1f2328">(</span>key<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>Object<span style="color:#fff"> </span>result<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>cache<span style="color:#1f2328">.</span><span style="color:#1f2328">put</span><span style="color:#1f2328">(</span>key<span style="color:#1f2328">,</span><span style="color:#fff"> </span>result<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Cache saved for key: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>key<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>result<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span>String<span style="color:#fff"> </span><span style="color:#6639ba">generateCacheKey</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">().</span><span style="color:#1f2328">toString</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>Arrays<span style="color:#1f2328">.</span><span style="color:#1f2328">toString</span><span style="color:#1f2328">(</span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getArgs</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="43-요청의-ip-블랙리스트-처리-ip-blacklisting"><strong>43. 요청의 IP 블랙리스트 처리 (IP Blacklisting)</strong></h2>
<p>특정 IP 주소에서의 요청을 차단합니다.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">IPBlacklistAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">static</span><span style="color:#fff"> </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span>Set<span style="color:#0550ae">&lt;</span>String<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span>blacklistedIPs<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>Set<span style="color:#1f2328">.</span><span style="color:#1f2328">of</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;192.168.0.1&#34;</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;10.0.0.1&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Before</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.controller..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">blockBlacklistedIPs</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>String<span style="color:#fff"> </span>clientIp<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>getClientIP<span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>blacklistedIPs<span style="color:#1f2328">.</span><span style="color:#1f2328">contains</span><span style="color:#1f2328">(</span>clientIp<span style="color:#1f2328">))</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">throw</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>RuntimeException<span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Access denied for IP: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>clientIp<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Access allowed for IP: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>clientIp<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span>String<span style="color:#fff"> </span><span style="color:#6639ba">getClientIP</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 실제로 HttpServletRequest에서 IP를 가져오는 로직을 사용</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;192.168.0.1&#34;</span><span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#57606a">// 예제용</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="44-요청별-세션-데이터-초기화-session-initialization"><strong>44. 요청별 세션 데이터 초기화 (Session Initialization)</strong></h2>
<p>HTTP 요청마다 세션 데이터를 초기화하거나 설정합니다.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">SessionInitializationAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Before</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.controller..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">initializeSessionData</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Initializing session data...&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 세션 데이터 초기화 로직</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="45-서비스-계층-장애-감지-service-failure-detection"><strong>45. 서비스 계층 장애 감지 (Service Failure Detection)</strong></h2>
<p>특정 서비스 계층에서의 장애 발생률을 모니터링하고 알림을 전송합니다.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">FailureDetectionAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span>Map<span style="color:#0550ae">&lt;</span>String<span style="color:#1f2328">,</span><span style="color:#fff"> </span>Integer<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span>failureCount<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>HashMap<span style="color:#0550ae">&lt;&gt;</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">static</span><span style="color:#fff"> </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>FAILURE_THRESHOLD<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>3<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@AfterThrowing</span><span style="color:#1f2328">(</span>pointcut<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;execution(* com.example.service..*(..))&#34;</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span>throwing<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;ex&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">detectFailures</span><span style="color:#1f2328">(</span>JoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">,</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span>ex<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>String<span style="color:#fff"> </span>methodName<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">().</span><span style="color:#1f2328">toString</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>failureCount<span style="color:#1f2328">.</span><span style="color:#1f2328">put</span><span style="color:#1f2328">(</span>methodName<span style="color:#1f2328">,</span><span style="color:#fff"> </span>failureCount<span style="color:#1f2328">.</span><span style="color:#1f2328">getOrDefault</span><span style="color:#1f2328">(</span>methodName<span style="color:#1f2328">,</span><span style="color:#fff"> </span>0<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>1<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>failureCount<span style="color:#1f2328">.</span><span style="color:#1f2328">get</span><span style="color:#1f2328">(</span>methodName<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#0550ae">&gt;=</span><span style="color:#fff"> </span>FAILURE_THRESHOLD<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">err</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Failure threshold exceeded for method: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>methodName<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>sendAlert<span style="color:#1f2328">(</span>methodName<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">sendAlert</span><span style="color:#1f2328">(</span>String<span style="color:#fff"> </span>methodName<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 알림 전송 로직 (예: 이메일, Slack)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Alert sent for method: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>methodName<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<p>여기에는 Spring AOP를 활용해 추가로 구현할 수 있는 더 많은 유용한 기능들을 소개합니다. 다양한 사례와 아이디어로 활용할 수 있습니다.</p>
<hr>
<h2 id="46-데이터베이스-페일오버-처리-database-failover-handling"><strong>46. 데이터베이스 페일오버 처리 (Database Failover Handling)</strong></h2>
<p>주 데이터베이스 장애 발생 시 대체 데이터베이스로 자동 전환.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">DatabaseFailoverAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">boolean</span><span style="color:#fff"> </span>primaryDatabaseDown<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">false</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.repository..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">handleFailover</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">try</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#0550ae">!</span>primaryDatabaseDown<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Using primary database...&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff"> </span><span style="color:#cf222e">catch</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>Exception<span style="color:#fff"> </span>ex<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">err</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Primary database failed. Switching to backup database...&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>primaryDatabaseDown<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">true</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>useBackupDatabase<span style="color:#1f2328">(</span>joinPoint<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>useBackupDatabase<span style="color:#1f2328">(</span>joinPoint<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">useBackupDatabase</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 여기서 backup 데이터베이스를 사용하는 로직 추가</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Executing with backup database&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">();</span><span style="color:#fff"> </span><span style="color:#57606a">// 예제에서는 그냥 진행</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="47-사용자-활동-기록-user-activity-logging"><strong>47. 사용자 활동 기록 (User Activity Logging)</strong></h2>
<p>사용자가 수행한 모든 주요 작업을 기록합니다.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">UserActivityLoggingAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@AfterReturning</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.controller..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">logUserActivity</span><span style="color:#1f2328">(</span>JoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>String<span style="color:#fff"> </span>methodName<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">().</span><span style="color:#1f2328">toShortString</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>String<span style="color:#fff"> </span>userId<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>getCurrentUserId<span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;User &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>userId<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; performed action: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>methodName<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>saveActivityToDatabase<span style="color:#1f2328">(</span>userId<span style="color:#1f2328">,</span><span style="color:#fff"> </span>methodName<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span>String<span style="color:#fff"> </span><span style="color:#6639ba">getCurrentUserId</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 보안 컨텍스트에서 현재 사용자 ID 가져오기</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;user123&#34;</span><span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#57606a">// 예제용</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">saveActivityToDatabase</span><span style="color:#1f2328">(</span>String<span style="color:#fff"> </span>userId<span style="color:#1f2328">,</span><span style="color:#fff"> </span>String<span style="color:#fff"> </span>action<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 데이터베이스에 사용자 활동 저장 로직</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Activity saved: User=&#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>userId<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;, Action=&#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>action<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="48-api-응답-압축-response-compression"><strong>48. API 응답 압축 (Response Compression)</strong></h2>
<p>컨트롤러의 모든 응답을 GZIP으로 압축하여 클라이언트로 전송합니다.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">ResponseCompressionAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.controller..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">compressResponse</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>Object<span style="color:#fff"> </span>response<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>response<span style="color:#fff"> </span><span style="color:#cf222e">instanceof</span><span style="color:#fff"> </span>String<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>String<span style="color:#fff"> </span>compressed<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>compress<span style="color:#1f2328">((</span>String<span style="color:#1f2328">)</span><span style="color:#fff"> </span>response<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Response compressed&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>compressed<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>response<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span>String<span style="color:#fff"> </span><span style="color:#6639ba">compress</span><span style="color:#1f2328">(</span>String<span style="color:#fff"> </span>data<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 간단한 GZIP 압축 로직</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>Base64<span style="color:#1f2328">.</span><span style="color:#1f2328">getEncoder</span><span style="color:#1f2328">().</span><span style="color:#1f2328">encodeToString</span><span style="color:#1f2328">(</span>data<span style="color:#1f2328">.</span><span style="color:#1f2328">getBytes</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="49-요청-프로파일링-request-profiling"><strong>49. 요청 프로파일링 (Request Profiling)</strong></h2>
<p>요청의 시작 시간, 끝 시간, 실행 시간 등을 기록하여 성능 분석.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">RequestProfilingAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.controller..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">profileRequest</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">long</span><span style="color:#fff"> </span>start<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">currentTimeMillis</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>Object<span style="color:#fff"> </span>response<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">long</span><span style="color:#fff"> </span>end<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">currentTimeMillis</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Method &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; executed in &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>end<span style="color:#fff"> </span><span style="color:#0550ae">-</span><span style="color:#fff"> </span>start<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; ms&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>response<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="50-서비스-호출-패턴-감지-service-call-pattern-detection"><strong>50. 서비스 호출 패턴 감지 (Service Call Pattern Detection)</strong></h2>
<p>특정 서비스가 지나치게 빈번히 호출되는 경우 경고.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">ServiceCallPatternAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span>Map<span style="color:#0550ae">&lt;</span>String<span style="color:#1f2328">,</span><span style="color:#fff"> </span>Long<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span>callTimestamps<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>HashMap<span style="color:#0550ae">&lt;&gt;</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">static</span><span style="color:#fff"> </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span><span style="color:#cf222e">long</span><span style="color:#fff"> </span>THRESHOLD<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>1000<span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#57606a">// 1초 이내 반복 호출 경고</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Before</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.service..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">detectRapidCalls</span><span style="color:#1f2328">(</span>JoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>String<span style="color:#fff"> </span>methodName<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">().</span><span style="color:#1f2328">toShortString</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">long</span><span style="color:#fff"> </span>currentTime<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">currentTimeMillis</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>callTimestamps<span style="color:#1f2328">.</span><span style="color:#1f2328">containsKey</span><span style="color:#1f2328">(</span>methodName<span style="color:#1f2328">))</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">long</span><span style="color:#fff"> </span>lastCall<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>callTimestamps<span style="color:#1f2328">.</span><span style="color:#1f2328">get</span><span style="color:#1f2328">(</span>methodName<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>currentTime<span style="color:#fff"> </span><span style="color:#0550ae">-</span><span style="color:#fff"> </span>lastCall<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>THRESHOLD<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">err</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Warning: Method &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>methodName<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; is being called too frequently!&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>callTimestamps<span style="color:#1f2328">.</span><span style="color:#1f2328">put</span><span style="color:#1f2328">(</span>methodName<span style="color:#1f2328">,</span><span style="color:#fff"> </span>currentTime<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="51-테스트-환경-모드-처리-test-mode-handling"><strong>51. 테스트 환경 모드 처리 (Test Mode Handling)</strong></h2>
<p>테스트 환경에서는 특정 동작을 스킵하거나 대체 동작을 실행합니다.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">TestModeAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">static</span><span style="color:#fff"> </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span><span style="color:#cf222e">boolean</span><span style="color:#fff"> </span>TEST_MODE<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">true</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.service..*(..)) &amp;&amp; @annotation(com.example.annotations.TestModeOnly)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">handleTestMode</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>TEST_MODE<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Test mode active, skipping: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span><span style="color:#cf222e">null</span><span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#57606a">// 테스트 환경에서는 동작 생략</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="52-서비스-사용량-제한-quota-management"><strong>52. 서비스 사용량 제한 (Quota Management)</strong></h2>
<p>사용자가 지정된 서비스 사용량을 초과하지 않도록 제한합니다.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">QuotaManagementAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span>Map<span style="color:#0550ae">&lt;</span>String<span style="color:#1f2328">,</span><span style="color:#fff"> </span>Integer<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span>userQuotas<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>HashMap<span style="color:#0550ae">&lt;&gt;</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">static</span><span style="color:#fff"> </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>MAX_QUOTA<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>100<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Before</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.service..*(..)) &amp;&amp; @annotation(com.example.annotations.QuotaLimited)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">enforceQuota</span><span style="color:#1f2328">(</span>JoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>String<span style="color:#fff"> </span>userId<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>getCurrentUserId<span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>currentQuota<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>userQuotas<span style="color:#1f2328">.</span><span style="color:#1f2328">getOrDefault</span><span style="color:#1f2328">(</span>userId<span style="color:#1f2328">,</span><span style="color:#fff"> </span>0<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>currentQuota<span style="color:#fff"> </span><span style="color:#0550ae">&gt;=</span><span style="color:#fff"> </span>MAX_QUOTA<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">throw</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>RuntimeException<span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Quota exceeded for user: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>userId<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>userQuotas<span style="color:#1f2328">.</span><span style="color:#1f2328">put</span><span style="color:#1f2328">(</span>userId<span style="color:#1f2328">,</span><span style="color:#fff"> </span>currentQuota<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>1<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Quota used by &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>userId<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>currentQuota<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>1<span style="color:#1f2328">));</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span>String<span style="color:#fff"> </span><span style="color:#6639ba">getCurrentUserId</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 현재 사용자 ID 가져오기 로직</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;user123&#34;</span><span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#57606a">// 예제용</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="53-요청-실행-순서-추적-execution-order-tracking"><strong>53. 요청 실행 순서 추적 (Execution Order Tracking)</strong></h2>
<p>다단계 요청 실행 흐름을 추적하여 디버깅 정보를 제공합니다.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">ExecutionOrderTrackingAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>sequence<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Before</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.service..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">trackExecutionOrder</span><span style="color:#1f2328">(</span>JoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>sequence<span style="color:#0550ae">++</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Execution order &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>sequence<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="54-비동기-오류-처리-async-error-handling"><strong>54. 비동기 오류 처리 (Async Error Handling)</strong></h2>
<p>비동기로 실행되는 메서드에서 발생하는 예외를 중앙에서 처리합니다.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">AsyncErrorHandlingAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@AfterThrowing</span><span style="color:#1f2328">(</span>pointcut<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;execution(* com.example.service..*(..)) &amp;&amp; @annotation(org.springframework.scheduling.annotation.Async)&#34;</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span>throwing<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;ex&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">handleAsyncError</span><span style="color:#1f2328">(</span>JoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">,</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span>ex<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">err</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Async error in method: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;, error: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>ex<span style="color:#1f2328">.</span><span style="color:#1f2328">getMessage</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>sendErrorNotification<span style="color:#1f2328">(</span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">().</span><span style="color:#1f2328">toString</span><span style="color:#1f2328">(),</span><span style="color:#fff"> </span>ex<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">sendErrorNotification</span><span style="color:#1f2328">(</span>String<span style="color:#fff"> </span>method<span style="color:#1f2328">,</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span>ex<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 오류 알림 로직 (예: 이메일, Slack)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Error notification sent for method: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>method<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="55-비밀-유지-계약nda-로깅"><strong>55. 비밀 유지 계약(NDA) 로깅</strong></h2>
<p>특정 메서드가 호출될 때, 실행된 동작이 NDA(Non-Disclosure Agreement)에 따라 로그에 포함되지 않도록 처리.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">NDALoggingAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;@annotation(com.example.annotations.NDAProtected)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">handleNDALogging</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">try</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;NDA-protected method called: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff"> </span><span style="color:#cf222e">finally</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Execution of NDA-protected method completed. No details logged.&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="56-컨트롤러-입력값-스니핑-방지-input-sniffing-prevention"><strong>56. 컨트롤러 입력값 스니핑 방지 (Input Sniffing Prevention)</strong></h2>
<p>사용자의 입력값에 악성 코드가 포함되어 있는지 탐지하고 차단합니다.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">InputValidationAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Before</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.controller..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">validateInput</span><span style="color:#1f2328">(</span>JoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>Object<span style="color:#0550ae">[]</span><span style="color:#fff"> </span>args<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getArgs</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>Object<span style="color:#fff"> </span>arg<span style="color:#fff"> </span><span style="color:#1f2328">:</span><span style="color:#fff"> </span>args<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>arg<span style="color:#fff"> </span><span style="color:#cf222e">instanceof</span><span style="color:#fff"> </span>String<span style="color:#fff"> </span><span style="color:#0550ae">&amp;&amp;</span><span style="color:#fff"> </span>containsMaliciousCode<span style="color:#1f2328">((</span>String<span style="color:#1f2328">)</span><span style="color:#fff"> </span>arg<span style="color:#1f2328">))</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#cf222e">throw</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>IllegalArgumentException<span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Malicious input detected: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>arg<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">boolean</span><span style="color:#fff"> </span><span style="color:#6639ba">containsMaliciousCode</span><span style="color:#1f2328">(</span>String<span style="color:#fff"> </span>input<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 간단한 악성 코드 탐지 로직</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>input<span style="color:#1f2328">.</span><span style="color:#1f2328">contains</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;&lt;script&gt;&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#0550ae">||</span><span style="color:#fff"> </span>input<span style="color:#1f2328">.</span><span style="color:#1f2328">contains</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;DROP TABLE&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="57-애플리케이션-상태-체크-application-health-monitoring"><strong>57. 애플리케이션 상태 체크 (Application Health Monitoring)</strong></h2>
<p>특정 메서드가 호출될 때 애플리케이션의 상태를 체크하고 필요시 알림을 전송.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">ApplicationHealthAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Before</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.service..*(..)) &amp;&amp; @annotation(com.example.annotations.HealthCheck)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">checkApplicationHealth</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#0550ae">!</span>isApplicationHealthy<span style="color:#1f2328">())</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">err</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Application health check failed!&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>sendHealthAlert<span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff"> </span><span style="color:#cf222e">else</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Application is healthy.&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">boolean</span><span style="color:#fff"> </span><span style="color:#6639ba">isApplicationHealthy</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 간단한 상태 체크 로직 (예: 메모리 사용량, 디스크 상태 등)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span><span style="color:#cf222e">true</span><span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#57606a">// 예제용</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">sendHealthAlert</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 건강 상태 알림 전송 로직</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Health alert sent to monitoring system.&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="58-데이터-변경-감사-로그-작성-audit-logging-with-details"><strong>58. 데이터 변경 감사 로그 작성 (Audit Logging with Details)</strong></h2>
<p>데이터베이스에서 데이터가 변경되었을 때 변경 전후의 값을 감사 로그로 작성.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">AuditDetailAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;@annotation(com.example.annotations.AuditChanges)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">logChanges</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Capturing audit log for method: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>Object<span style="color:#0550ae">[]</span><span style="color:#fff"> </span>args<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getArgs</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 변경 전 데이터 가져오기</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>Object<span style="color:#fff"> </span>beforeChange<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>fetchCurrentData<span style="color:#1f2328">(</span>args<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>Object<span style="color:#fff"> </span>result<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 변경 후 데이터 가져오기</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>Object<span style="color:#fff"> </span>afterChange<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>fetchCurrentData<span style="color:#1f2328">(</span>args<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 감사 로그 작성</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>logAuditDetails<span style="color:#1f2328">(</span>beforeChange<span style="color:#1f2328">,</span><span style="color:#fff"> </span>afterChange<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>result<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">fetchCurrentData</span><span style="color:#1f2328">(</span>Object<span style="color:#0550ae">[]</span><span style="color:#fff"> </span>args<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 현재 데이터를 가져오는 로직 (예: ID로 조회)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;Sample Data&#34;</span><span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#57606a">// 예제용</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">logAuditDetails</span><span style="color:#1f2328">(</span>Object<span style="color:#fff"> </span>before<span style="color:#1f2328">,</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span>after<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Audit Log -&gt; Before: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>before<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;, After: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>after<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="59-외부-api-호출-자동-재시도-external-api-retry-mechanism"><strong>59. 외부 API 호출 자동 재시도 (External API Retry Mechanism)</strong></h2>
<p>외부 API 호출이 실패할 경우 일정 횟수까지 재시도합니다.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">ExternalAPIRetryAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;@annotation(com.example.annotations.RetryOnFailure)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">retryAPIRequest</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>maxRetries<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>3<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>attempts<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">while</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">true</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">try</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#1f2328">}</span><span style="color:#fff"> </span><span style="color:#cf222e">catch</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>Exception<span style="color:#fff"> </span>ex<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span>attempts<span style="color:#0550ae">++</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">err</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;API call failed. Attempt &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>attempts<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>attempts<span style="color:#fff"> </span><span style="color:#0550ae">&gt;=</span><span style="color:#fff"> </span>maxRetries<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                    </span><span style="color:#cf222e">throw</span><span style="color:#fff"> </span>ex<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="60-비밀번호-유효성-검사-password-strength-validation"><strong>60. 비밀번호 유효성 검사 (Password Strength Validation)</strong></h2>
<p>사용자가 입력한 비밀번호가 규칙에 맞는지 검증.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">PasswordValidationAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Before</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;@annotation(com.example.annotations.ValidatePassword)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">validatePassword</span><span style="color:#1f2328">(</span>JoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>Object<span style="color:#0550ae">[]</span><span style="color:#fff"> </span>args<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getArgs</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>Object<span style="color:#fff"> </span>arg<span style="color:#fff"> </span><span style="color:#1f2328">:</span><span style="color:#fff"> </span>args<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>arg<span style="color:#fff"> </span><span style="color:#cf222e">instanceof</span><span style="color:#fff"> </span>String<span style="color:#fff"> </span><span style="color:#0550ae">&amp;&amp;</span><span style="color:#fff"> </span><span style="color:#0550ae">!</span>isValidPassword<span style="color:#1f2328">((</span>String<span style="color:#1f2328">)</span><span style="color:#fff"> </span>arg<span style="color:#1f2328">))</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#cf222e">throw</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>IllegalArgumentException<span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Invalid password: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>arg<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">boolean</span><span style="color:#fff"> </span><span style="color:#6639ba">isValidPassword</span><span style="color:#1f2328">(</span>String<span style="color:#fff"> </span>password<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 비밀번호 강도 검사 (예: 최소 길이, 특수 문자 포함 여부 등)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>password<span style="color:#1f2328">.</span><span style="color:#1f2328">length</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#0550ae">&gt;=</span><span style="color:#fff"> </span>8<span style="color:#fff"> </span><span style="color:#0550ae">&amp;&amp;</span><span style="color:#fff"> </span>password<span style="color:#1f2328">.</span><span style="color:#1f2328">matches</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;.*[!@#$%^&amp;*()].*&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="61-지연-초기화-lazy-initialization"><strong>61. 지연 초기화 (Lazy Initialization)</strong></h2>
<p>특정 메서드의 결과를 최초 호출 시 초기화하고 캐싱하여 재사용.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">LazyInitializationAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span>Map<span style="color:#0550ae">&lt;</span>String<span style="color:#1f2328">,</span><span style="color:#fff"> </span>Object<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span>cache<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>HashMap<span style="color:#0550ae">&lt;&gt;</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;@annotation(com.example.annotations.LazyInit)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">handleLazyInit</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>String<span style="color:#fff"> </span>key<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">().</span><span style="color:#1f2328">toString</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>cache<span style="color:#1f2328">.</span><span style="color:#1f2328">containsKey</span><span style="color:#1f2328">(</span>key<span style="color:#1f2328">))</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Returning cached result for: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>key<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>cache<span style="color:#1f2328">.</span><span style="color:#1f2328">get</span><span style="color:#1f2328">(</span>key<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>Object<span style="color:#fff"> </span>result<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>cache<span style="color:#1f2328">.</span><span style="color:#1f2328">put</span><span style="color:#1f2328">(</span>key<span style="color:#1f2328">,</span><span style="color:#fff"> </span>result<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Result cached for: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>key<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>result<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="62-사용자-시간대-기반-데이터-처리-time-zone-based-processing"><strong>62. 사용자 시간대 기반 데이터 처리 (Time Zone Based Processing)</strong></h2>
<p>사용자의 시간대에 맞춰 데이터를 처리.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">TimeZoneProcessingAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;@annotation(com.example.annotations.TimeZoneAware)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">adjustForTimeZone</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>String<span style="color:#fff"> </span>userTimeZone<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>getUserTimeZone<span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Adjusting data for user time zone: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>userTimeZone<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 시간대 조정 로직</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>Object<span style="color:#fff"> </span>result<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>adjustResultForTimeZone<span style="color:#1f2328">(</span>result<span style="color:#1f2328">,</span><span style="color:#fff"> </span>userTimeZone<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span>String<span style="color:#fff"> </span><span style="color:#6639ba">getUserTimeZone</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 사용자의 시간대 가져오는 로직 (예: 요청 헤더에서 추출)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;Asia/Seoul&#34;</span><span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#57606a">// 예제용</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">adjustResultForTimeZone</span><span style="color:#1f2328">(</span>Object<span style="color:#fff"> </span>result<span style="color:#1f2328">,</span><span style="color:#fff"> </span>String<span style="color:#fff"> </span>timeZone<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 시간대에 맞게 데이터를 조정하는 로직</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>result<span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#57606a">// 예제용</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="63-api-요청별-실행-우선순위-처리-priority-based-execution"><strong>63. API 요청별 실행 우선순위 처리 (Priority-Based Execution)</strong></h2>
<p>API 요청에 우선순위를 부여하여 중요한 요청을 먼저 처리.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">PriorityExecutionAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;@annotation(com.example.annotations.Priority)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">prioritizeRequest</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>String<span style="color:#fff"> </span>priority<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>getPriorityFromRequest<span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Handling request with priority: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>priority<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 우선순위에 따라 처리 로직 추가</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span>String<span style="color:#fff"> </span><span style="color:#6639ba">getPriorityFromRequest</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 요청에서 우선순위를 추출 (예: 요청 헤더 또는 파라미터)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;HIGH&#34;</span><span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#57606a">// 예제용</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="64-요청-응답-시간-로깅-request-response-time-logging"><strong>64. 요청 응답 시간 로깅 (Request-Response Time Logging)</strong></h2>
<p>요청 처리의 전체 시간을 측정하고 로깅.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">RequestResponseTimeAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.controller..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">logRequestResponseTime</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">long</span><span style="color:#fff"> </span>start<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">currentTimeMillis</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>Object<span style="color:#fff"> </span>result<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">long</span><span style="color:#fff"> </span>end<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">currentTimeMillis</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Request to &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; completed in &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>end<span style="color:#fff"> </span><span style="color:#0550ae">-</span><span style="color:#fff"> </span>start<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; ms&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>result<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="65-api-요청-크기-제한-request-size-limiting"><strong>65. API 요청 크기 제한 (Request Size Limiting)</strong></h2>
<p>API 요청의 데이터 크기를 제한하여 과도한 데이터 전송 방지.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">RequestSizeLimitingAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">static</span><span style="color:#fff"> </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>MAX_SIZE<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>1024<span style="color:#fff"> </span><span style="color:#0550ae">*</span><span style="color:#fff"> </span>1024<span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#57606a">// 1MB</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Before</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.controller..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">limitRequestSize</span><span style="color:#1f2328">(</span>JoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>Object<span style="color:#fff"> </span>arg<span style="color:#fff"> </span><span style="color:#1f2328">:</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getArgs</span><span style="color:#1f2328">())</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>arg<span style="color:#fff"> </span><span style="color:#cf222e">instanceof</span><span style="color:#fff"> </span>String<span style="color:#fff"> </span><span style="color:#0550ae">&amp;&amp;</span><span style="color:#fff"> </span><span style="color:#1f2328">((</span>String<span style="color:#1f2328">)</span><span style="color:#fff"> </span>arg<span style="color:#1f2328">).</span><span style="color:#1f2328">length</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span>MAX_SIZE<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#cf222e">throw</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>IllegalArgumentException<span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Request size exceeds the allowed limit.&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="66-요청-리플레이-방지-request-replay-protection"><strong>66. 요청 리플레이 방지 (Request Replay Protection)</strong></h2>
<p>특정 요청이 중복해서 처리되지 않도록 방지.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">ReplayProtectionAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span>Set<span style="color:#0550ae">&lt;</span>String<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span>processedRequests<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>Collections<span style="color:#1f2328">.</span><span style="color:#1f2328">synchronizedSet</span><span style="color:#1f2328">(</span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>HashSet<span style="color:#0550ae">&lt;&gt;</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Before</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;@annotation(com.example.annotations.ReplayProtected)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">preventReplay</span><span style="color:#1f2328">(</span>JoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>String<span style="color:#fff"> </span>requestId<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>extractRequestId<span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>processedRequests<span style="color:#1f2328">.</span><span style="color:#1f2328">contains</span><span style="color:#1f2328">(</span>requestId<span style="color:#1f2328">))</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">throw</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>IllegalStateException<span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Duplicate request detected: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>requestId<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>processedRequests<span style="color:#1f2328">.</span><span style="color:#1f2328">add</span><span style="color:#1f2328">(</span>requestId<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span>String<span style="color:#fff"> </span><span style="color:#6639ba">extractRequestId</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 요청 ID 추출 로직 (예: 헤더에서 가져오기)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>UUID<span style="color:#1f2328">.</span><span style="color:#1f2328">randomUUID</span><span style="color:#1f2328">().</span><span style="color:#1f2328">toString</span><span style="color:#1f2328">();</span><span style="color:#fff"> </span><span style="color:#57606a">// 예제용</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="67-사용자별-데이터-처리-속도-제한-rate-limit-per-user"><strong>67. 사용자별 데이터 처리 속도 제한 (Rate Limit per User)</strong></h2>
<p>사용자별 데이터 처리 속도를 제한.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">UserRateLimitAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span>Map<span style="color:#0550ae">&lt;</span>String<span style="color:#1f2328">,</span><span style="color:#fff"> </span>Long<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span>userLastRequestTime<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>ConcurrentHashMap<span style="color:#0550ae">&lt;&gt;</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">static</span><span style="color:#fff"> </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span><span style="color:#cf222e">long</span><span style="color:#fff"> </span>MIN_INTERVAL<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>2000<span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#57606a">// 2초 간격</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Before</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.controller..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">enforceUserRateLimit</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>String<span style="color:#fff"> </span>userId<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>getCurrentUserId<span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">long</span><span style="color:#fff"> </span>now<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">currentTimeMillis</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>userLastRequestTime<span style="color:#1f2328">.</span><span style="color:#1f2328">containsKey</span><span style="color:#1f2328">(</span>userId<span style="color:#1f2328">))</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">long</span><span style="color:#fff"> </span>lastRequestTime<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>userLastRequestTime<span style="color:#1f2328">.</span><span style="color:#1f2328">get</span><span style="color:#1f2328">(</span>userId<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>now<span style="color:#fff"> </span><span style="color:#0550ae">-</span><span style="color:#fff"> </span>lastRequestTime<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>MIN_INTERVAL<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#cf222e">throw</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>RuntimeException<span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;User &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>userId<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; is sending requests too quickly.&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>userLastRequestTime<span style="color:#1f2328">.</span><span style="color:#1f2328">put</span><span style="color:#1f2328">(</span>userId<span style="color:#1f2328">,</span><span style="color:#fff"> </span>now<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span>String<span style="color:#fff"> </span><span style="color:#6639ba">getCurrentUserId</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 사용자 ID 가져오기 로직</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;user123&#34;</span><span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#57606a">// 예제용</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="68-메서드-호출-통계-method-invocation-statistics"><strong>68. 메서드 호출 통계 (Method Invocation Statistics)</strong></h2>
<p>특정 메서드가 얼마나 자주 호출되는지 기록하고 분석.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">MethodInvocationStatisticsAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span>Map<span style="color:#0550ae">&lt;</span>String<span style="color:#1f2328">,</span><span style="color:#fff"> </span>Integer<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span>methodCallCounts<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>ConcurrentHashMap<span style="color:#0550ae">&lt;&gt;</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@After</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.service..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">trackMethodCalls</span><span style="color:#1f2328">(</span>JoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>String<span style="color:#fff"> </span>methodName<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">().</span><span style="color:#1f2328">toShortString</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>methodCallCounts<span style="color:#1f2328">.</span><span style="color:#1f2328">put</span><span style="color:#1f2328">(</span>methodName<span style="color:#1f2328">,</span><span style="color:#fff"> </span>methodCallCounts<span style="color:#1f2328">.</span><span style="color:#1f2328">getOrDefault</span><span style="color:#1f2328">(</span>methodName<span style="color:#1f2328">,</span><span style="color:#fff"> </span>0<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>1<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Method &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>methodName<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; has been called &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>methodCallCounts<span style="color:#1f2328">.</span><span style="color:#1f2328">get</span><span style="color:#1f2328">(</span>methodName<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; times.&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="69-특정-필드-제거-후-로깅-exclude-sensitive-fields"><strong>69. 특정 필드 제거 후 로깅 (Exclude Sensitive Fields)</strong></h2>
<p>로그 출력 시 민감한 데이터를 제거합니다.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">SensitiveFieldRemovalAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.service..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">removeSensitiveFieldsFromLog</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>Object<span style="color:#fff"> </span>result<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>result<span style="color:#fff"> </span><span style="color:#cf222e">instanceof</span><span style="color:#fff"> </span>Map<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>Map<span style="color:#0550ae">&lt;</span>String<span style="color:#1f2328">,</span><span style="color:#fff"> </span>Object<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span>data<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>Map<span style="color:#0550ae">&lt;</span>String<span style="color:#1f2328">,</span><span style="color:#fff"> </span>Object<span style="color:#0550ae">&gt;</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span>result<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>data<span style="color:#1f2328">.</span><span style="color:#1f2328">remove</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;password&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>data<span style="color:#1f2328">.</span><span style="color:#1f2328">remove</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;creditCardNumber&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>result<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="70-api-사용량-모니터링-api-usage-monitoring"><strong>70. API 사용량 모니터링 (API Usage Monitoring)</strong></h2>
<p>API 호출 사용량을 추적하여 과도한 요청에 대한 경고를 제공합니다.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">ApiUsageMonitoringAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span>Map<span style="color:#0550ae">&lt;</span>String<span style="color:#1f2328">,</span><span style="color:#fff"> </span>Integer<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span>apiUsageCounts<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>ConcurrentHashMap<span style="color:#0550ae">&lt;&gt;</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">static</span><span style="color:#fff"> </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>MAX_USAGE_LIMIT<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>100<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@After</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.controller..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">monitorApiUsage</span><span style="color:#1f2328">(</span>JoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>String<span style="color:#fff"> </span>methodName<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">().</span><span style="color:#1f2328">toShortString</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>apiUsageCounts<span style="color:#1f2328">.</span><span style="color:#1f2328">put</span><span style="color:#1f2328">(</span>methodName<span style="color:#1f2328">,</span><span style="color:#fff"> </span>apiUsageCounts<span style="color:#1f2328">.</span><span style="color:#1f2328">getOrDefault</span><span style="color:#1f2328">(</span>methodName<span style="color:#1f2328">,</span><span style="color:#fff"> </span>0<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>1<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>apiUsageCounts<span style="color:#1f2328">.</span><span style="color:#1f2328">get</span><span style="color:#1f2328">(</span>methodName<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span>MAX_USAGE_LIMIT<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">err</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Warning: API usage limit exceeded for &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>methodName<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="71-요청-응답-디버깅-request-response-debugging"><strong>71. 요청 응답 디버깅 (Request-Response Debugging)</strong></h2>
<p>요청 및 응답 데이터를 캡처하고 디버깅 로그를 출력.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">RequestResponseDebuggingAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.controller..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">logRequestAndResponse</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Request to: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Arguments: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>Arrays<span style="color:#1f2328">.</span><span style="color:#1f2328">toString</span><span style="color:#1f2328">(</span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getArgs</span><span style="color:#1f2328">()));</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>Object<span style="color:#fff"> </span>response<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Response from: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Response Data: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>response<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>response<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="72-오래-실행되는-요청-탐지-long-running-request-detection"><strong>72. 오래 실행되는 요청 탐지 (Long-Running Request Detection)</strong></h2>
<p>특정 시간 이상 실행되는 요청을 탐지하여 경고.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">LongRunningRequestAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">static</span><span style="color:#fff"> </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span><span style="color:#cf222e">long</span><span style="color:#fff"> </span>WARNING_THRESHOLD<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>3000<span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#57606a">// 3초</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.service..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">detectLongRunningRequests</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">long</span><span style="color:#fff"> </span>start<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">currentTimeMillis</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>Object<span style="color:#fff"> </span>result<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">long</span><span style="color:#fff"> </span>duration<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">currentTimeMillis</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#0550ae">-</span><span style="color:#fff"> </span>start<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>duration<span style="color:#fff"> </span><span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span>WARNING_THRESHOLD<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">err</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Warning: Long-running request detected in &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; (Duration: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>duration<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; ms)&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>result<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="73-메서드-실행-제한-시간-초과-경고-timeout-warning"><strong>73. 메서드 실행 제한 시간 초과 경고 (Timeout Warning)</strong></h2>
<p>특정 메서드가 지정된 시간 내에 완료되지 않으면 경고를 출력.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">MethodTimeoutWarningAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">static</span><span style="color:#fff"> </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span><span style="color:#cf222e">long</span><span style="color:#fff"> </span>TIMEOUT_THRESHOLD<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>2000<span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#57606a">// 2초</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.service..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">monitorMethodTimeout</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">long</span><span style="color:#fff"> </span>start<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">currentTimeMillis</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>Object<span style="color:#fff"> </span>result<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">long</span><span style="color:#fff"> </span>duration<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">currentTimeMillis</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#0550ae">-</span><span style="color:#fff"> </span>start<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>duration<span style="color:#fff"> </span><span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span>TIMEOUT_THRESHOLD<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">err</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Warning: Method &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; took too long (&#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>duration<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; ms)&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>result<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="74-데이터-사본-생성-및-복원-backup-and-restore-data"><strong>74. 데이터 사본 생성 및 복원 (Backup and Restore Data)</strong></h2>
<p>데이터 변경 작업 전에 사본을 생성하고, 실패 시 복원.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">DataBackupAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span>Map<span style="color:#0550ae">&lt;</span>String<span style="color:#1f2328">,</span><span style="color:#fff"> </span>Object<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span>backupData<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>ConcurrentHashMap<span style="color:#0550ae">&lt;&gt;</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;@annotation(com.example.annotations.BackupRestore)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">handleBackupAndRestore</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>String<span style="color:#fff"> </span>key<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">().</span><span style="color:#1f2328">toString</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">try</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>backupData<span style="color:#1f2328">.</span><span style="color:#1f2328">put</span><span style="color:#1f2328">(</span>key<span style="color:#1f2328">,</span><span style="color:#fff"> </span>createBackup<span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff"> </span><span style="color:#cf222e">catch</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>Exception<span style="color:#fff"> </span>ex<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>restoreBackup<span style="color:#1f2328">(</span>key<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">throw</span><span style="color:#fff"> </span>ex<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">createBackup</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 데이터 백업 로직</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Backup created&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;BackupData&#34;</span><span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#57606a">// 예제용</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">restoreBackup</span><span style="color:#1f2328">(</span>String<span style="color:#fff"> </span>key<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 데이터 복원 로직</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Restoring backup for key: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>key<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="75-http-요청의-헤더-검증-request-header-validation"><strong>75. HTTP 요청의 헤더 검증 (Request Header Validation)</strong></h2>
<p>HTTP 요청 헤더에 필수 정보가 포함되어 있는지 검증.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">RequestHeaderValidationAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Before</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.controller..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">validateHeaders</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>String<span style="color:#fff"> </span>requiredHeader<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>getHeader<span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;X-Required-Header&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>requiredHeader<span style="color:#fff"> </span><span style="color:#0550ae">==</span><span style="color:#fff"> </span><span style="color:#cf222e">null</span><span style="color:#fff"> </span><span style="color:#0550ae">||</span><span style="color:#fff"> </span>requiredHeader<span style="color:#1f2328">.</span><span style="color:#1f2328">isEmpty</span><span style="color:#1f2328">())</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">throw</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>IllegalArgumentException<span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Missing required header: X-Required-Header&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span>String<span style="color:#fff"> </span><span style="color:#6639ba">getHeader</span><span style="color:#1f2328">(</span>String<span style="color:#fff"> </span>headerName<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 요청 헤더 가져오기 (HttpServletRequest에서)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;ValidHeader&#34;</span><span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#57606a">// 예제용</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="76-데이터-일관성-확인-data-consistency-check"><strong>76. 데이터 일관성 확인 (Data Consistency Check)</strong></h2>
<p>메서드 호출 후 데이터베이스의 상태를 확인하여 데이터 일관성을 유지.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">DataConsistencyAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@After</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.repository..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">checkDataConsistency</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#0550ae">!</span>isDataConsistent<span style="color:#1f2328">())</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">err</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Data inconsistency detected!&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>handleInconsistency<span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">boolean</span><span style="color:#fff"> </span><span style="color:#6639ba">isDataConsistent</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 데이터 일관성 확인 로직</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span><span style="color:#cf222e">true</span><span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#57606a">// 예제용</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">handleInconsistency</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 데이터 불일치 처리 로직</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Handling data inconsistency...&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="77-동적-기능-활성화-dynamic-feature-toggle"><strong>77. 동적 기능 활성화 (Dynamic Feature Toggle)</strong></h2>
<p>외부 설정값에 따라 메서드 실행 여부를 동적으로 제어.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">FeatureToggleAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;@annotation(com.example.annotations.FeatureToggle)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">handleFeatureToggle</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>String<span style="color:#fff"> </span>featureName<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>getFeatureName<span style="color:#1f2328">(</span>joinPoint<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>isFeatureEnabled<span style="color:#1f2328">(</span>featureName<span style="color:#1f2328">))</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Feature &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>featureName<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; is enabled&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff"> </span><span style="color:#cf222e">else</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Feature &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>featureName<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; is disabled&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span><span style="color:#cf222e">null</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span>String<span style="color:#fff"> </span><span style="color:#6639ba">getFeatureName</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 어노테이션에서 기능 이름 추출</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;NewFeature&#34;</span><span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#57606a">// 예제용</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">boolean</span><span style="color:#fff"> </span><span style="color:#6639ba">isFeatureEnabled</span><span style="color:#1f2328">(</span>String<span style="color:#fff"> </span>featureName<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 외부 설정값으로 기능 활성화 여부 결정</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span><span style="color:#cf222e">true</span><span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#57606a">// 예제용</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="78-api-응답-캐시-무효화-invalidate-cache-on-response"><strong>78. API 응답 캐시 무효화 (Invalidate Cache on Response)</strong></h2>
<p>특정 조건에서 API 응답 캐시를 무효화.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">CacheInvalidationAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@After</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;@annotation(com.example.annotations.InvalidateCache)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">invalidateCache</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Invalidating cache for the current operation...&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 캐시 무효화 로직</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="79-메서드-호출-흐름-추적-call-flow-tracing"><strong>79. 메서드 호출 흐름 추적 (Call Flow Tracing)</strong></h2>
<p>메서드 호출 흐름을 추적하여 디버깅.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">CallFlowTracingAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span>ThreadLocal<span style="color:#0550ae">&lt;</span>Stack<span style="color:#0550ae">&lt;</span>String<span style="color:#0550ae">&gt;&gt;</span><span style="color:#fff"> </span>callStack<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>ThreadLocal<span style="color:#1f2328">.</span><span style="color:#1f2328">withInitial</span><span style="color:#1f2328">(</span>Stack<span style="color:#1f2328">::</span><span style="color:#cf222e">new</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Before</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">beforeMethod</span><span style="color:#1f2328">(</span>JoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>callStack<span style="color:#1f2328">.</span><span style="color:#1f2328">get</span><span style="color:#1f2328">().</span><span style="color:#1f2328">push</span><span style="color:#1f2328">(</span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">().</span><span style="color:#1f2328">toShortString</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Entering: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@After</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">afterMethod</span><span style="color:#1f2328">(</span>JoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Exiting: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>callStack<span style="color:#1f2328">.</span><span style="color:#1f2328">get</span><span style="color:#1f2328">().</span><span style="color:#1f2328">pop</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="80-트랜잭션-롤백-후-처리-post-rollback-handling"><strong>80. 트랜잭션 롤백 후 처리 (Post Rollback Handling)</strong></h2>
<p>트랜잭션이 롤백된 후 추가 작업을 수행.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">RollbackHandlingAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@AfterThrowing</span><span style="color:#1f2328">(</span>pointcut<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;execution(* com.example.service..*(..)) &amp;&amp; @annotation(org.springframework.transaction.annotation.Transactional)&#34;</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span>throwing<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;ex&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">handleRollback</span><span style="color:#1f2328">(</span>Throwable<span style="color:#fff"> </span>ex<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">err</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Transaction rolled back due to: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>ex<span style="color:#1f2328">.</span><span style="color:#1f2328">getMessage</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 롤백 후 작업 (예: 알림 전송, 복구 작업)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="81-사용자-활동의-세부-로그-생성-detailed-user-activity-logging"><strong>81. 사용자 활동의 세부 로그 생성 (Detailed User Activity Logging)</strong></h2>
<p>사용자가 수행한 작업의 세부 로그를 생성하여 분석.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">DetailedUserActivityAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@After</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.controller..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">logDetailedUserActivity</span><span style="color:#1f2328">(</span>JoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>String<span style="color:#fff"> </span>userId<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>getCurrentUserId<span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>String<span style="color:#fff"> </span>methodName<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">().</span><span style="color:#1f2328">toShortString</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;User &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>userId<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; accessed &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>methodName<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>saveDetailedActivityLog<span style="color:#1f2328">(</span>userId<span style="color:#1f2328">,</span><span style="color:#fff"> </span>methodName<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">saveDetailedActivityLog</span><span style="color:#1f2328">(</span>String<span style="color:#fff"> </span>userId<span style="color:#1f2328">,</span><span style="color:#fff"> </span>String<span style="color:#fff"> </span>action<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 사용자 활동 로그 저장 로직</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Activity saved: User=&#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>userId<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;, Action=&#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>action<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span>String<span style="color:#fff"> </span><span style="color:#6639ba">getCurrentUserId</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;user123&#34;</span><span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#57606a">// 예제용</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="82-글로벌-메서드-실행-모니터링-global-method-execution-monitoring"><strong>82. 글로벌 메서드 실행 모니터링 (Global Method Execution Monitoring)</strong></h2>
<p>애플리케이션 내에서 모든 메서드 실행을 모니터링하여 통계 생성.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">GlobalMethodMonitoringAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span>Map<span style="color:#0550ae">&lt;</span>String<span style="color:#1f2328">,</span><span style="color:#fff"> </span>Long<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span>executionCounts<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>ConcurrentHashMap<span style="color:#0550ae">&lt;&gt;</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span>Map<span style="color:#0550ae">&lt;</span>String<span style="color:#1f2328">,</span><span style="color:#fff"> </span>Long<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span>executionDurations<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>ConcurrentHashMap<span style="color:#0550ae">&lt;&gt;</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">monitorMethodExecution</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>String<span style="color:#fff"> </span>methodName<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">().</span><span style="color:#1f2328">toShortString</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">long</span><span style="color:#fff"> </span>start<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">currentTimeMillis</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>Object<span style="color:#fff"> </span>result<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">long</span><span style="color:#fff"> </span>duration<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">currentTimeMillis</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#0550ae">-</span><span style="color:#fff"> </span>start<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>executionCounts<span style="color:#1f2328">.</span><span style="color:#1f2328">put</span><span style="color:#1f2328">(</span>methodName<span style="color:#1f2328">,</span><span style="color:#fff"> </span>executionCounts<span style="color:#1f2328">.</span><span style="color:#1f2328">getOrDefault</span><span style="color:#1f2328">(</span>methodName<span style="color:#1f2328">,</span><span style="color:#fff"> </span>0L<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>1<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>executionDurations<span style="color:#1f2328">.</span><span style="color:#1f2328">put</span><span style="color:#1f2328">(</span>methodName<span style="color:#1f2328">,</span><span style="color:#fff"> </span>executionDurations<span style="color:#1f2328">.</span><span style="color:#1f2328">getOrDefault</span><span style="color:#1f2328">(</span>methodName<span style="color:#1f2328">,</span><span style="color:#fff"> </span>0L<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>duration<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Executed &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>methodName<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; in &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>duration<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; ms&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>result<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">printStatistics</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>executionCounts<span style="color:#1f2328">.</span><span style="color:#1f2328">forEach</span><span style="color:#1f2328">((</span>method<span style="color:#1f2328">,</span><span style="color:#fff"> </span>count<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#0550ae">-&gt;</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">long</span><span style="color:#fff"> </span>totalDuration<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>executionDurations<span style="color:#1f2328">.</span><span style="color:#1f2328">get</span><span style="color:#1f2328">(</span>method<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Method: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>method<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;, Count: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>count<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;, Avg Time: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>totalDuration<span style="color:#fff"> </span><span style="color:#0550ae">/</span><span style="color:#fff"> </span>count<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; ms&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">});</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="83-비동기-메서드-병렬-실행-제한-async-method-parallel-execution-limit"><strong>83. 비동기 메서드 병렬 실행 제한 (Async Method Parallel Execution Limit)</strong></h2>
<p>비동기로 실행되는 메서드의 병렬 실행 개수를 제한.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">AsyncParallelExecutionLimitAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span>Semaphore<span style="color:#fff"> </span>semaphore<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>Semaphore<span style="color:#1f2328">(</span>5<span style="color:#1f2328">);</span><span style="color:#fff"> </span><span style="color:#57606a">// 최대 병렬 실행 개수 제한</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;@annotation(org.springframework.scheduling.annotation.Async)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">limitAsyncExecution</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#0550ae">!</span>semaphore<span style="color:#1f2328">.</span><span style="color:#1f2328">tryAcquire</span><span style="color:#1f2328">())</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">throw</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>RuntimeException<span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Too many parallel executions. Try again later.&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">try</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff"> </span><span style="color:#cf222e">finally</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>semaphore<span style="color:#1f2328">.</span><span style="color:#1f2328">release</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="84-동적-서비스-변경-dynamic-service-switching"><strong>84. 동적 서비스 변경 (Dynamic Service Switching)</strong></h2>
<p>특정 조건에 따라 서비스 인스턴스를 동적으로 변경.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">DynamicServiceSwitchingAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.service..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">switchService</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>shouldUseAlternativeService<span style="color:#1f2328">())</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Using alternative service for: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>useAlternativeService<span style="color:#1f2328">(</span>joinPoint<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">boolean</span><span style="color:#fff"> </span><span style="color:#6639ba">shouldUseAlternativeService</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 서비스 변경 조건</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>Math<span style="color:#1f2328">.</span><span style="color:#1f2328">random</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span>0<span style="color:#1f2328">.</span><span style="color:#1f2328">5</span><span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#57606a">// 예제용</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">useAlternativeService</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Alternative service logic executed.&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 실제로 대체 서비스 호출 로직 작성</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span><span style="color:#cf222e">null</span><span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#57606a">// 예제용</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="85-데이터-조회-실패-대체-데이터-제공-fallback-data-provider"><strong>85. 데이터 조회 실패 대체 데이터 제공 (Fallback Data Provider)</strong></h2>
<p>데이터 조회 실패 시 기본값 또는 캐시 데이터를 제공.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">FallbackDataAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.repository..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">provideFallbackData</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">try</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff"> </span><span style="color:#cf222e">catch</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>Exception<span style="color:#fff"> </span>ex<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">err</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Failed to fetch data. Providing fallback.&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>getFallbackData<span style="color:#1f2328">(</span>joinPoint<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">getFallbackData</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 대체 데이터 제공 로직</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;FallbackData&#34;</span><span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#57606a">// 예제용</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="86-사용자-지정-요청-추적-id-생성-custom-request-trace-id"><strong>86. 사용자 지정 요청 추적 ID 생성 (Custom Request Trace ID)</strong></h2>
<p>각 요청에 고유한 추적 ID를 생성하여 로깅과 디버깅에 활용.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">RequestTraceIdAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span>ThreadLocal<span style="color:#0550ae">&lt;</span>String<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span>traceId<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>ThreadLocal<span style="color:#0550ae">&lt;&gt;</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Before</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.controller..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">generateTraceId</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>traceId<span style="color:#1f2328">.</span><span style="color:#1f2328">set</span><span style="color:#1f2328">(</span>UUID<span style="color:#1f2328">.</span><span style="color:#1f2328">randomUUID</span><span style="color:#1f2328">().</span><span style="color:#1f2328">toString</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Generated Trace ID: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>traceId<span style="color:#1f2328">.</span><span style="color:#1f2328">get</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@After</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.controller..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">clearTraceId</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Clearing Trace ID: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>traceId<span style="color:#1f2328">.</span><span style="color:#1f2328">get</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>traceId<span style="color:#1f2328">.</span><span style="color:#1f2328">remove</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>String<span style="color:#fff"> </span><span style="color:#6639ba">getTraceId</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>traceId<span style="color:#1f2328">.</span><span style="color:#1f2328">get</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="87-사용자-세션-기반-접근-제어-session-based-access-control"><strong>87. 사용자 세션 기반 접근 제어 (Session-Based Access Control)</strong></h2>
<p>사용자 세션 상태에 따라 특정 API 접근을 제한.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">SessionAccessControlAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Before</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;@annotation(com.example.annotations.SessionRestricted)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">restrictAccessBasedOnSession</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#0550ae">!</span>isSessionActive<span style="color:#1f2328">())</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">throw</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>IllegalStateException<span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;User session is not active.&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">boolean</span><span style="color:#fff"> </span><span style="color:#6639ba">isSessionActive</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 세션 상태 확인 로직</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span><span style="color:#cf222e">true</span><span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#57606a">// 예제용</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="88-캐시-업데이트-시-알림-전송-notify-on-cache-update"><strong>88. 캐시 업데이트 시 알림 전송 (Notify on Cache Update)</strong></h2>
<p>캐시가 업데이트될 때 관리자나 모니터링 시스템에 알림을 전송.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">CacheUpdateNotificationAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@After</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;@annotation(org.springframework.cache.annotation.CachePut)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">notifyCacheUpdate</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Cache updated. Sending notification...&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>sendCacheUpdateNotification<span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">sendCacheUpdateNotification</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 알림 전송 로직 (예: 이메일, 슬랙)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Notification sent.&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="89-사용자별-트랜잭션-추적-user-specific-transaction-tracking"><strong>89. 사용자별 트랜잭션 추적 (User-Specific Transaction Tracking)</strong></h2>
<p>각 사용자별로 트랜잭션 실행 내역을 추적.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">UserTransactionTrackingAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@AfterReturning</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;@annotation(org.springframework.transaction.annotation.Transactional)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">trackTransaction</span><span style="color:#1f2328">(</span>JoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>String<span style="color:#fff"> </span>userId<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>getCurrentUserId<span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>String<span style="color:#fff"> </span>methodName<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">().</span><span style="color:#1f2328">toShortString</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Transaction completed by user: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>userId<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; on method: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>methodName<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>saveTransactionLog<span style="color:#1f2328">(</span>userId<span style="color:#1f2328">,</span><span style="color:#fff"> </span>methodName<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span>String<span style="color:#fff"> </span><span style="color:#6639ba">getCurrentUserId</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 사용자 ID 가져오기 로직</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;user123&#34;</span><span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#57606a">// 예제용</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">saveTransactionLog</span><span style="color:#1f2328">(</span>String<span style="color:#fff"> </span>userId<span style="color:#1f2328">,</span><span style="color:#fff"> </span>String<span style="color:#fff"> </span>methodName<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 트랜잭션 로그 저장</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Transaction log saved for user: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>userId<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;, method: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>methodName<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="90-커스텀-메서드-리턴값-변환-custom-return-value-transformation"><strong>90. 커스텀 메서드 리턴값 변환 (Custom Return Value Transformation)</strong></h2>
<p>특정 메서드의 반환값을 동적으로 변환.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">ReturnValueTransformationAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@AfterReturning</span><span style="color:#1f2328">(</span>pointcut<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;execution(* com.example.service..*(..))&#34;</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span>returning<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;result&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">transformReturnValue</span><span style="color:#1f2328">(</span>JoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">,</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span>result<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>result<span style="color:#fff"> </span><span style="color:#cf222e">instanceof</span><span style="color:#fff"> </span>String<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span><span style="color:#1f2328">((</span>String<span style="color:#1f2328">)</span><span style="color:#fff"> </span>result<span style="color:#1f2328">).</span><span style="color:#1f2328">toUpperCase</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>result<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="91-조건부-로깅-conditional-logging"><strong>91. 조건부 로깅 (Conditional Logging)</strong></h2>
<p>특정 조건을 만족할 때만 메서드 실행을 로깅합니다.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">ConditionalLoggingAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.service..*(..)) &amp;&amp; @annotation(com.example.annotations.ConditionalLog)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">logConditionally</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>shouldLog<span style="color:#1f2328">(</span>joinPoint<span style="color:#1f2328">))</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Executing method: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">boolean</span><span style="color:#fff"> </span><span style="color:#6639ba">shouldLog</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 조건 정의 (예: 특정 파라미터 값, 현재 환경 등)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span><span style="color:#cf222e">true</span><span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#57606a">// 예제에서는 항상 로깅</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="92-데이터-입력-이력-관리-data-input-history-tracking"><strong>92. 데이터 입력 이력 관리 (Data Input History Tracking)</strong></h2>
<p>모든 데이터 입력 내역을 저장하여 추적 가능하도록 만듭니다.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">DataInputHistoryAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@After</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.service..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">trackInputHistory</span><span style="color:#1f2328">(</span>JoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>Object<span style="color:#0550ae">[]</span><span style="color:#fff"> </span>args<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getArgs</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>Object<span style="color:#fff"> </span>arg<span style="color:#fff"> </span><span style="color:#1f2328">:</span><span style="color:#fff"> </span>args<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>saveInputHistory<span style="color:#1f2328">(</span>arg<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">saveInputHistory</span><span style="color:#1f2328">(</span>Object<span style="color:#fff"> </span>input<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 데이터 입력 이력 저장 로직</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Input history saved: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>input<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="93-메서드-호출-순서-보장-ensure-method-invocation-order"><strong>93. 메서드 호출 순서 보장 (Ensure Method Invocation Order)</strong></h2>
<p>특정 메서드 호출 순서를 보장하여 의도한 흐름을 유지합니다.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">MethodInvocationOrderAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span>Queue<span style="color:#0550ae">&lt;</span>String<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span>expectedOrder<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>LinkedList<span style="color:#0550ae">&lt;&gt;</span><span style="color:#1f2328">(</span>List<span style="color:#1f2328">.</span><span style="color:#1f2328">of</span><span style="color:#1f2328">(</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#0a3069">&#34;firstMethod&#34;</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;secondMethod&#34;</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;thirdMethod&#34;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">));</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Before</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.service..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">ensureOrder</span><span style="color:#1f2328">(</span>JoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>String<span style="color:#fff"> </span>methodName<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">().</span><span style="color:#1f2328">getName</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#0550ae">!</span>expectedOrder<span style="color:#1f2328">.</span><span style="color:#1f2328">isEmpty</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#0550ae">&amp;&amp;</span><span style="color:#fff"> </span><span style="color:#0550ae">!</span>expectedOrder<span style="color:#1f2328">.</span><span style="color:#1f2328">peek</span><span style="color:#1f2328">().</span><span style="color:#1f2328">equals</span><span style="color:#1f2328">(</span>methodName<span style="color:#1f2328">))</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">throw</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>IllegalStateException<span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Method &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>methodName<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; called out of order.&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>expectedOrder<span style="color:#1f2328">.</span><span style="color:#1f2328">poll</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="94-특정-파라미터-기반-접근-제어-parameter-based-access-control"><strong>94. 특정 파라미터 기반 접근 제어 (Parameter-Based Access Control)</strong></h2>
<p>메서드 파라미터 값에 따라 실행 여부를 제어.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">ParameterBasedAccessControlAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Before</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.service..*(..)) &amp;&amp; args(param,..)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">restrictAccess</span><span style="color:#1f2328">(</span>Object<span style="color:#fff"> </span>param<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#0550ae">!</span>hasAccess<span style="color:#1f2328">(</span>param<span style="color:#1f2328">))</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">throw</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>SecurityException<span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Access denied for parameter: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>param<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">boolean</span><span style="color:#fff"> </span><span style="color:#6639ba">hasAccess</span><span style="color:#1f2328">(</span>Object<span style="color:#fff"> </span>param<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 접근 권한 확인 로직 (예: 특정 값 허용 여부)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span><span style="color:#0550ae">!</span><span style="color:#0a3069">&#34;restricted&#34;</span><span style="color:#1f2328">.</span><span style="color:#1f2328">equals</span><span style="color:#1f2328">(</span>param<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="95-요청-데이터-변환-request-data-transformation"><strong>95. 요청 데이터 변환 (Request Data Transformation)</strong></h2>
<p>요청 데이터를 변환하여 메서드가 처리하기 쉽게 조정.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">RequestDataTransformationAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.controller..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">transformRequestData</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>Object<span style="color:#0550ae">[]</span><span style="color:#fff"> </span>args<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getArgs</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>args<span style="color:#1f2328">.</span><span style="color:#1f2328">length</span><span style="color:#1f2328">;</span><span style="color:#fff"> </span>i<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>args<span style="color:#0550ae">[</span>i<span style="color:#0550ae">]</span><span style="color:#fff"> </span><span style="color:#cf222e">instanceof</span><span style="color:#fff"> </span>String<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span>args<span style="color:#0550ae">[</span>i<span style="color:#0550ae">]</span><span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>preprocessData<span style="color:#1f2328">((</span>String<span style="color:#1f2328">)</span><span style="color:#fff"> </span>args<span style="color:#0550ae">[</span>i<span style="color:#0550ae">]</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">(</span>args<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span>String<span style="color:#fff"> </span><span style="color:#6639ba">preprocessData</span><span style="color:#1f2328">(</span>String<span style="color:#fff"> </span>data<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 데이터 전처리 로직 (예: 대문자 변환)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>data<span style="color:#1f2328">.</span><span style="color:#1f2328">trim</span><span style="color:#1f2328">().</span><span style="color:#1f2328">toUpperCase</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="96-트랜잭션-내-특정-작업-감시-monitor-specific-actions-in-transactions"><strong>96. 트랜잭션 내 특정 작업 감시 (Monitor Specific Actions in Transactions)</strong></h2>
<p>트랜잭션 내부에서 특정 작업이 발생하는지 모니터링.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">TransactionMonitoringAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;@annotation(org.springframework.transaction.annotation.Transactional)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">monitorTransaction</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Transaction started: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">try</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff"> </span><span style="color:#cf222e">finally</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Transaction completed: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="97-동적-메서드-실행-제한-dynamic-execution-blocking"><strong>97. 동적 메서드 실행 제한 (Dynamic Execution Blocking)</strong></h2>
<p>환경이나 조건에 따라 메서드 실행을 차단.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">DynamicExecutionBlockingAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Before</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.service..*(..)) &amp;&amp; @annotation(com.example.annotations.DynamicBlock)&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">blockExecution</span><span style="color:#1f2328">(</span>JoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>shouldBlockExecution<span style="color:#1f2328">())</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">throw</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>IllegalStateException<span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Method execution blocked: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">boolean</span><span style="color:#fff"> </span><span style="color:#6639ba">shouldBlockExecution</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// 차단 조건 (예: 특정 환경, 설정값 등)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span><span style="color:#cf222e">false</span><span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#57606a">// 예제에서는 차단하지 않음</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="98-http-응답-데이터-필터링-response-data-filtering"><strong>98. HTTP 응답 데이터 필터링 (Response Data Filtering)</strong></h2>
<p>API 응답에서 민감한 정보를 필터링.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">ResponseDataFilteringAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.controller..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">filterResponseData</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>Object<span style="color:#fff"> </span>response<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>response<span style="color:#fff"> </span><span style="color:#cf222e">instanceof</span><span style="color:#fff"> </span>Map<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>Map<span style="color:#0550ae">&lt;</span>String<span style="color:#1f2328">,</span><span style="color:#fff"> </span>Object<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span>data<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>Map<span style="color:#0550ae">&lt;</span>String<span style="color:#1f2328">,</span><span style="color:#fff"> </span>Object<span style="color:#0550ae">&gt;</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span>response<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>data<span style="color:#1f2328">.</span><span style="color:#1f2328">remove</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;password&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>data<span style="color:#1f2328">.</span><span style="color:#1f2328">remove</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;ssn&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff"> </span><span style="color:#57606a">// 민감 데이터 제거</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>response<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="99-대규모-데이터-처리-모니터링-large-data-processing-monitoring"><strong>99. 대규모 데이터 처리 모니터링 (Large Data Processing Monitoring)</strong></h2>
<p>대규모 데이터 처리 시 성능을 추적하고 경고.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">LargeDataProcessingMonitoringAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">static</span><span style="color:#fff"> </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>LARGE_DATA_THRESHOLD<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>1000<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Around</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.service..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>Object<span style="color:#fff"> </span><span style="color:#6639ba">monitorLargeDataProcessing</span><span style="color:#1f2328">(</span>ProceedingJoinPoint<span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">throws</span><span style="color:#fff"> </span>Throwable<span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>Object<span style="color:#0550ae">[]</span><span style="color:#fff"> </span>args<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getArgs</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>Object<span style="color:#fff"> </span>arg<span style="color:#fff"> </span><span style="color:#1f2328">:</span><span style="color:#fff"> </span>args<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>arg<span style="color:#fff"> </span><span style="color:#cf222e">instanceof</span><span style="color:#fff"> </span>List<span style="color:#fff"> </span><span style="color:#0550ae">&amp;&amp;</span><span style="color:#fff"> </span><span style="color:#1f2328">((</span>List<span style="color:#0550ae">&lt;?&gt;</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span>arg<span style="color:#1f2328">).</span><span style="color:#1f2328">size</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span>LARGE_DATA_THRESHOLD<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">err</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Warning: Large data processing detected in method: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">getSignature</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>joinPoint<span style="color:#1f2328">.</span><span style="color:#1f2328">proceed</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
<h2 id="100-요청-id-전파-request-id-propagation"><strong>100. 요청 ID 전파 (Request ID Propagation)</strong></h2>
<p>요청 ID를 메서드 호출 체인 전반에 전파하여 추적 가능.</p>
<p><strong>구현 예제</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-text-size-adjust:none;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Aspect</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#0550ae">@Component</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">RequestIdPropagationAspect</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">static</span><span style="color:#fff"> </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span>ThreadLocal<span style="color:#0550ae">&lt;</span>String<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span>requestId<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>ThreadLocal<span style="color:#1f2328">.</span><span style="color:#1f2328">withInitial</span><span style="color:#1f2328">(()</span><span style="color:#fff"> </span><span style="color:#0550ae">-&gt;</span><span style="color:#fff"> </span>UUID<span style="color:#1f2328">.</span><span style="color:#1f2328">randomUUID</span><span style="color:#1f2328">().</span><span style="color:#1f2328">toString</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Before</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;execution(* com.example.controller..*(..))&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">propagateRequestId</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Propagating Request ID: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>requestId<span style="color:#1f2328">.</span><span style="color:#1f2328">get</span><span style="color:#1f2328">());</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">static</span><span style="color:#fff"> </span>String<span style="color:#fff"> </span><span style="color:#6639ba">getRequestId</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>requestId<span style="color:#1f2328">.</span><span style="color:#1f2328">get</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><hr>
</section>
<time>
  <i class="far fa-clock"></i>
  2024년 12월 20일 13시 15분
</time>
 
<i class="far fa-folder"></i>
<a href="https://gyuha.com//categories/spring">Spring</a>
 
<div class="post-comment">
  <div id="disqus_thread"></div>
<script>
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "gyuha-blog" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>


<hr class="summary-sep" />
<div class="recommend-articles">
  <h3>
    추천 글
  </h3>
  <ul>
    
    <li>
      <a href="https://gyuha.com/post/2024/2024-12-18_list_of_useful_annotation_in_spring_boot/" rel="prev">
        <span>Spring Boot에서 자주 사용되는 애노테이션</span>
      </a>
    </li>
     
    <li>
      <a href="https://gyuha.com/post/2024/2024-12-27_advanced-typescript/" rel="next">
        <span>TypeScript Interface와 Type</span>
      </a>
    </li>
    
  </ul>
</div>
 
        </div>

        <div id="sidebar" class="col-12 col-md-8 col-lg-4">
          <div class="post-sidebar-area">
<div id="post-toc" class="sidebar-widget-area">
  <div class="title">
    <i class="fa fa-list"></i>
    목차
  </div>
  <div class="widget-content">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#1-로깅-logging"><strong>1. 로깅 (Logging)</strong></a></li>
    <li><a href="#2-보안-검사-security-check"><strong>2. 보안 검사 (Security Check)</strong></a></li>
    <li><a href="#3-트랜잭션-관리-custom-transaction-management"><strong>3. 트랜잭션 관리 (Custom Transaction Management)</strong></a></li>
    <li><a href="#4-캐싱-caching"><strong>4. 캐싱 (Caching)</strong></a></li>
    <li><a href="#5-예외-처리-global-exception-handling"><strong>5. 예외 처리 (Global Exception Handling)</strong></a></li>
    <li><a href="#6-메트릭-수집-metrics-collection"><strong>6. 메트릭 수집 (Metrics Collection)</strong></a></li>
    <li><a href="#7-입력값-검증-validation"><strong>7. 입력값 검증 (Validation)</strong></a></li>
    <li><a href="#8-요청-데이터-암호화-및-복호화"><strong>8. 요청 데이터 암호화 및 복호화</strong></a></li>
    <li><a href="#9-api-호출-제한-rate-limiting"><strong>9. API 호출 제한 (Rate Limiting)</strong></a></li>
    <li><a href="#10-메서드-리트라이-retry"><strong>10. 메서드 리트라이 (Retry)</strong></a></li>
    <li><a href="#11-감사-로깅-audit-logging"><strong>11. 감사 로깅 (Audit Logging)</strong></a></li>
    <li><a href="#12-메서드-호출-알림-notification"><strong>12. 메서드 호출 알림 (Notification)</strong></a></li>
    <li><a href="#13-요청-추적-request-tracing"><strong>13. 요청 추적 (Request Tracing)</strong></a></li>
    <li><a href="#14-데이터-변경-이벤트-처리"><strong>14. 데이터 변경 이벤트 처리</strong></a></li>
    <li><a href="#15-성능-문제-감지-performance-monitoring"><strong>15. 성능 문제 감지 (Performance Monitoring)</strong></a></li>
    <li><a href="#16-데이터베이스-슬로우-쿼리-탐지"><strong>16. 데이터베이스 슬로우 쿼리 탐지</strong></a></li>
    <li><a href="#17-사용자-접근-로그-기록-access-logging"><strong>17. 사용자 접근 로그 기록 (Access Logging)</strong></a></li>
    <li><a href="#18-조건부-실행-conditional-execution"><strong>18. 조건부 실행 (Conditional Execution)</strong></a></li>
    <li><a href="#19-메서드-호출-수-제한"><strong>19. 메서드 호출 수 제한</strong></a></li>
    <li><a href="#20-사용자-id-태깅-user-id-tagging"><strong>20. 사용자 ID 태깅 (User ID Tagging)</strong></a></li>
    <li><a href="#21-필드-마스킹-field-masking"><strong>21. 필드 마스킹 (Field Masking)</strong></a></li>
    <li><a href="#22-실행-환경-확인-environment-check"><strong>22. 실행 환경 확인 (Environment Check)</strong></a></li>
    <li><a href="#23-특정-패키지-메서드-호출-차단"><strong>23. 특정 패키지 메서드 호출 차단</strong></a></li>
    <li><a href="#24-메서드-입력값-변환-input-transformation"><strong>24. 메서드 입력값 변환 (Input Transformation)</strong></a></li>
    <li><a href="#25-메모리-사용-모니터링-memory-usage-monitoring"><strong>25. 메모리 사용 모니터링 (Memory Usage Monitoring)</strong></a></li>
    <li><a href="#26-api-요청-제한-속도-조정-dynamic-throttling"><strong>26. API 요청 제한 속도 조정 (Dynamic Throttling)</strong></a></li>
    <li><a href="#27-컨트롤러-응답-변환-response-transformation"><strong>27. 컨트롤러 응답 변환 (Response Transformation)</strong></a></li>
    <li><a href="#28-실시간-메트릭-수집-real-time-metrics-collection"><strong>28. 실시간 메트릭 수집 (Real-time Metrics Collection)</strong></a></li>
    <li><a href="#29-사용자별-데이터-필터링"><strong>29. 사용자별 데이터 필터링</strong></a></li>
    <li><a href="#30-메서드-파라미터-로그-제외-sensitive-logging"><strong>30. 메서드 파라미터 로그 제외 (Sensitive Logging)</strong></a></li>
    <li><a href="#31-백그라운드-태스크-실행-background-task-execution"><strong>31. 백그라운드 태스크 실행 (Background Task Execution)</strong></a></li>
    <li><a href="#32-디버그-모드-활성화-debug-mode-toggle"><strong>32. 디버그 모드 활성화 (Debug Mode Toggle)</strong></a></li>
    <li><a href="#33-캐시-삭제-후처리-post-cache-eviction-handling"><strong>33. 캐시 삭제 후처리 (Post Cache Eviction Handling)</strong></a></li>
    <li><a href="#34-데이터-통합-검증-unified-data-validation"><strong>34. 데이터 통합 검증 (Unified Data Validation)</strong></a></li>
    <li><a href="#35-조건부-트랜잭션-관리-conditional-transaction-management"><strong>35. 조건부 트랜잭션 관리 (Conditional Transaction Management)</strong></a></li>
    <li><a href="#36-데이터-변경-알림-change-notification"><strong>36. 데이터 변경 알림 (Change Notification)</strong></a></li>
    <li><a href="#37-캐시-프리로드-cache-preloading"><strong>37. 캐시 프리로드 (Cache Preloading)</strong></a></li>
    <li><a href="#38-특정-메서드-비활성화-method-deactivation"><strong>38. 특정 메서드 비활성화 (Method Deactivation)</strong></a></li>
    <li><a href="#39-api-요청-경로-추적-request-path-tracing"><strong>39. API 요청 경로 추적 (Request Path Tracing)</strong></a></li>
    <li><a href="#40-메서드-병렬-실행-parallel-execution"><strong>40. 메서드 병렬 실행 (Parallel Execution)</strong></a></li>
    <li><a href="#41-결과-데이터-포맷팅-result-formatting"><strong>41. 결과 데이터 포맷팅 (Result Formatting)</strong></a></li>
    <li><a href="#42-실행-결과-캐싱-result-caching"><strong>42. 실행 결과 캐싱 (Result Caching)</strong></a></li>
    <li><a href="#43-요청의-ip-블랙리스트-처리-ip-blacklisting"><strong>43. 요청의 IP 블랙리스트 처리 (IP Blacklisting)</strong></a></li>
    <li><a href="#44-요청별-세션-데이터-초기화-session-initialization"><strong>44. 요청별 세션 데이터 초기화 (Session Initialization)</strong></a></li>
    <li><a href="#45-서비스-계층-장애-감지-service-failure-detection"><strong>45. 서비스 계층 장애 감지 (Service Failure Detection)</strong></a></li>
    <li><a href="#46-데이터베이스-페일오버-처리-database-failover-handling"><strong>46. 데이터베이스 페일오버 처리 (Database Failover Handling)</strong></a></li>
    <li><a href="#47-사용자-활동-기록-user-activity-logging"><strong>47. 사용자 활동 기록 (User Activity Logging)</strong></a></li>
    <li><a href="#48-api-응답-압축-response-compression"><strong>48. API 응답 압축 (Response Compression)</strong></a></li>
    <li><a href="#49-요청-프로파일링-request-profiling"><strong>49. 요청 프로파일링 (Request Profiling)</strong></a></li>
    <li><a href="#50-서비스-호출-패턴-감지-service-call-pattern-detection"><strong>50. 서비스 호출 패턴 감지 (Service Call Pattern Detection)</strong></a></li>
    <li><a href="#51-테스트-환경-모드-처리-test-mode-handling"><strong>51. 테스트 환경 모드 처리 (Test Mode Handling)</strong></a></li>
    <li><a href="#52-서비스-사용량-제한-quota-management"><strong>52. 서비스 사용량 제한 (Quota Management)</strong></a></li>
    <li><a href="#53-요청-실행-순서-추적-execution-order-tracking"><strong>53. 요청 실행 순서 추적 (Execution Order Tracking)</strong></a></li>
    <li><a href="#54-비동기-오류-처리-async-error-handling"><strong>54. 비동기 오류 처리 (Async Error Handling)</strong></a></li>
    <li><a href="#55-비밀-유지-계약nda-로깅"><strong>55. 비밀 유지 계약(NDA) 로깅</strong></a></li>
    <li><a href="#56-컨트롤러-입력값-스니핑-방지-input-sniffing-prevention"><strong>56. 컨트롤러 입력값 스니핑 방지 (Input Sniffing Prevention)</strong></a></li>
    <li><a href="#57-애플리케이션-상태-체크-application-health-monitoring"><strong>57. 애플리케이션 상태 체크 (Application Health Monitoring)</strong></a></li>
    <li><a href="#58-데이터-변경-감사-로그-작성-audit-logging-with-details"><strong>58. 데이터 변경 감사 로그 작성 (Audit Logging with Details)</strong></a></li>
    <li><a href="#59-외부-api-호출-자동-재시도-external-api-retry-mechanism"><strong>59. 외부 API 호출 자동 재시도 (External API Retry Mechanism)</strong></a></li>
    <li><a href="#60-비밀번호-유효성-검사-password-strength-validation"><strong>60. 비밀번호 유효성 검사 (Password Strength Validation)</strong></a></li>
    <li><a href="#61-지연-초기화-lazy-initialization"><strong>61. 지연 초기화 (Lazy Initialization)</strong></a></li>
    <li><a href="#62-사용자-시간대-기반-데이터-처리-time-zone-based-processing"><strong>62. 사용자 시간대 기반 데이터 처리 (Time Zone Based Processing)</strong></a></li>
    <li><a href="#63-api-요청별-실행-우선순위-처리-priority-based-execution"><strong>63. API 요청별 실행 우선순위 처리 (Priority-Based Execution)</strong></a></li>
    <li><a href="#64-요청-응답-시간-로깅-request-response-time-logging"><strong>64. 요청 응답 시간 로깅 (Request-Response Time Logging)</strong></a></li>
    <li><a href="#65-api-요청-크기-제한-request-size-limiting"><strong>65. API 요청 크기 제한 (Request Size Limiting)</strong></a></li>
    <li><a href="#66-요청-리플레이-방지-request-replay-protection"><strong>66. 요청 리플레이 방지 (Request Replay Protection)</strong></a></li>
    <li><a href="#67-사용자별-데이터-처리-속도-제한-rate-limit-per-user"><strong>67. 사용자별 데이터 처리 속도 제한 (Rate Limit per User)</strong></a></li>
    <li><a href="#68-메서드-호출-통계-method-invocation-statistics"><strong>68. 메서드 호출 통계 (Method Invocation Statistics)</strong></a></li>
    <li><a href="#69-특정-필드-제거-후-로깅-exclude-sensitive-fields"><strong>69. 특정 필드 제거 후 로깅 (Exclude Sensitive Fields)</strong></a></li>
    <li><a href="#70-api-사용량-모니터링-api-usage-monitoring"><strong>70. API 사용량 모니터링 (API Usage Monitoring)</strong></a></li>
    <li><a href="#71-요청-응답-디버깅-request-response-debugging"><strong>71. 요청 응답 디버깅 (Request-Response Debugging)</strong></a></li>
    <li><a href="#72-오래-실행되는-요청-탐지-long-running-request-detection"><strong>72. 오래 실행되는 요청 탐지 (Long-Running Request Detection)</strong></a></li>
    <li><a href="#73-메서드-실행-제한-시간-초과-경고-timeout-warning"><strong>73. 메서드 실행 제한 시간 초과 경고 (Timeout Warning)</strong></a></li>
    <li><a href="#74-데이터-사본-생성-및-복원-backup-and-restore-data"><strong>74. 데이터 사본 생성 및 복원 (Backup and Restore Data)</strong></a></li>
    <li><a href="#75-http-요청의-헤더-검증-request-header-validation"><strong>75. HTTP 요청의 헤더 검증 (Request Header Validation)</strong></a></li>
    <li><a href="#76-데이터-일관성-확인-data-consistency-check"><strong>76. 데이터 일관성 확인 (Data Consistency Check)</strong></a></li>
    <li><a href="#77-동적-기능-활성화-dynamic-feature-toggle"><strong>77. 동적 기능 활성화 (Dynamic Feature Toggle)</strong></a></li>
    <li><a href="#78-api-응답-캐시-무효화-invalidate-cache-on-response"><strong>78. API 응답 캐시 무효화 (Invalidate Cache on Response)</strong></a></li>
    <li><a href="#79-메서드-호출-흐름-추적-call-flow-tracing"><strong>79. 메서드 호출 흐름 추적 (Call Flow Tracing)</strong></a></li>
    <li><a href="#80-트랜잭션-롤백-후-처리-post-rollback-handling"><strong>80. 트랜잭션 롤백 후 처리 (Post Rollback Handling)</strong></a></li>
    <li><a href="#81-사용자-활동의-세부-로그-생성-detailed-user-activity-logging"><strong>81. 사용자 활동의 세부 로그 생성 (Detailed User Activity Logging)</strong></a></li>
    <li><a href="#82-글로벌-메서드-실행-모니터링-global-method-execution-monitoring"><strong>82. 글로벌 메서드 실행 모니터링 (Global Method Execution Monitoring)</strong></a></li>
    <li><a href="#83-비동기-메서드-병렬-실행-제한-async-method-parallel-execution-limit"><strong>83. 비동기 메서드 병렬 실행 제한 (Async Method Parallel Execution Limit)</strong></a></li>
    <li><a href="#84-동적-서비스-변경-dynamic-service-switching"><strong>84. 동적 서비스 변경 (Dynamic Service Switching)</strong></a></li>
    <li><a href="#85-데이터-조회-실패-대체-데이터-제공-fallback-data-provider"><strong>85. 데이터 조회 실패 대체 데이터 제공 (Fallback Data Provider)</strong></a></li>
    <li><a href="#86-사용자-지정-요청-추적-id-생성-custom-request-trace-id"><strong>86. 사용자 지정 요청 추적 ID 생성 (Custom Request Trace ID)</strong></a></li>
    <li><a href="#87-사용자-세션-기반-접근-제어-session-based-access-control"><strong>87. 사용자 세션 기반 접근 제어 (Session-Based Access Control)</strong></a></li>
    <li><a href="#88-캐시-업데이트-시-알림-전송-notify-on-cache-update"><strong>88. 캐시 업데이트 시 알림 전송 (Notify on Cache Update)</strong></a></li>
    <li><a href="#89-사용자별-트랜잭션-추적-user-specific-transaction-tracking"><strong>89. 사용자별 트랜잭션 추적 (User-Specific Transaction Tracking)</strong></a></li>
    <li><a href="#90-커스텀-메서드-리턴값-변환-custom-return-value-transformation"><strong>90. 커스텀 메서드 리턴값 변환 (Custom Return Value Transformation)</strong></a></li>
    <li><a href="#91-조건부-로깅-conditional-logging"><strong>91. 조건부 로깅 (Conditional Logging)</strong></a></li>
    <li><a href="#92-데이터-입력-이력-관리-data-input-history-tracking"><strong>92. 데이터 입력 이력 관리 (Data Input History Tracking)</strong></a></li>
    <li><a href="#93-메서드-호출-순서-보장-ensure-method-invocation-order"><strong>93. 메서드 호출 순서 보장 (Ensure Method Invocation Order)</strong></a></li>
    <li><a href="#94-특정-파라미터-기반-접근-제어-parameter-based-access-control"><strong>94. 특정 파라미터 기반 접근 제어 (Parameter-Based Access Control)</strong></a></li>
    <li><a href="#95-요청-데이터-변환-request-data-transformation"><strong>95. 요청 데이터 변환 (Request Data Transformation)</strong></a></li>
    <li><a href="#96-트랜잭션-내-특정-작업-감시-monitor-specific-actions-in-transactions"><strong>96. 트랜잭션 내 특정 작업 감시 (Monitor Specific Actions in Transactions)</strong></a></li>
    <li><a href="#97-동적-메서드-실행-제한-dynamic-execution-blocking"><strong>97. 동적 메서드 실행 제한 (Dynamic Execution Blocking)</strong></a></li>
    <li><a href="#98-http-응답-데이터-필터링-response-data-filtering"><strong>98. HTTP 응답 데이터 필터링 (Response Data Filtering)</strong></a></li>
    <li><a href="#99-대규모-데이터-처리-모니터링-large-data-processing-monitoring"><strong>99. 대규모 데이터 처리 모니터링 (Large Data Processing Monitoring)</strong></a></li>
    <li><a href="#100-요청-id-전파-request-id-propagation"><strong>100. 요청 ID 전파 (Request ID Propagation)</strong></a></li>
  </ul>
</nav>
  </div>
</div>
<div class="sidebar-widget-area">
  <div class="title">
    <i class="fa fa-tag"></i>
    태그
  </div>
  <div class="widget-content">
     
    <a href="https://gyuha.com/tags/spring" class="badge badge-secondary">Spring</a>
    <a href="https://gyuha.com/tags/annotation" class="badge badge-secondary">annotation</a>
  </div>
</div>

          </div>
        </div>
      </div>
    </div>
<footer class="footer-area">
  <div class="container">
    <div class="row">
      <div class="col-12 col-md-4">
        <div class="footer-single-widget">
          <div class="copywrite-text mt-30">
            <p>
              Copyright &copy;
              <script>
                document.write(new Date().getFullYear());
              </script>
              All rights reserved
            </p>
            <p>Made with by Gyuha</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</footer>


<script src="/vendor/jquery-2.2.4.min.js"></script>
<script src="/vendor/bootstrap/popper.min.js"></script>
<script src="/vendor/bootstrap/bootstrap.min.js"></script>
<script src="/vendor/native-console.js"></script>
<script src="/vendor/jquery.easing.1.3.js"></script>
<script src="/vendor/jquery.scrollUp.min.js"></script>


<script src="/js/active.js"></script>

<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
<script>
  hljs.initHighlightingOnLoad();
</script>

<script src="//cdnjs.cloudflare.com/ajax/libs/three.js/r121/three.min.js"></script>
<script src="//cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.net.min.js"></script>
<script>
  $(function () {
    if (window.VANTA) window.VANTA.NET({
      el: '#waves',
      mouseControls: true,
      touchControls: true,
      gyroControls: false,
      minHeight: 200.00,
      minWidth: 200.00,
      scale: 1.00,
      scaleMobile: 1.00,
      color: 0x3fa4ff
    })
  })
  document.addEventListener('DOMContentLoaded', function () {
    const toc = document.querySelector('#TableOfContents');
    const content = document.querySelector('.post-content');
    const headers = content.querySelectorAll('h1, h2, h3, h4, h5, h6');

    
    toc.querySelectorAll('a').forEach(link => {
      link.classList.add('toc-item');
    });

    
    headers.forEach((header, index) => {
      if (!header.id) {
        header.id = `section-${index}`;
      }
    });

    
    function highlightTocItem() {
      const scrollPosition = window.scrollY;
      const tocItems = toc.querySelectorAll('.toc-item');

      
      let activeIndex = -1;
      for (let i = 0; i < headers.length; i++) {
        if (headers[i].getBoundingClientRect().top >= 0) {
          activeIndex = i;
          break;
        }
      }

      
      tocItems.forEach(item => item.classList.remove('active'));

      
      if (activeIndex !== -1) {
        const activeHeader = headers[activeIndex];
        const activeLink = toc.querySelector(`a[href="#${activeHeader.id}"]`);
        if (activeLink) {
          activeLink.classList.add('active');
        }
      } else if (scrollPosition + window.innerHeight >= document.documentElement.scrollHeight) {
        
        tocItems[tocItems.length - 1].classList.add('active');
      }
    }

    window.addEventListener('scroll', highlightTocItem);
    highlightTocItem(); 
  });

  
  document.addEventListener('DOMContentLoaded', function() {
    
    const codeBlocks = document.querySelectorAll('.post-content pre:not(.mermaid)');
    
    codeBlocks.forEach(function(block) {
      
      const copyButton = document.createElement('button');
      copyButton.className = 'copy-button';
      copyButton.title = '복사';
      copyButton.innerHTML = '<i class="far fa-copy"></i>';
      
      
      copyButton.addEventListener('click', function() {
        
        const code = block.querySelector('code');
        const text = code ? code.textContent : block.textContent;
        
        
        navigator.clipboard.writeText(text).then(function() {
          
          copyButton.innerHTML = '<i class="fas fa-check"></i>';
          copyButton.classList.add('copied');
          
          
          setTimeout(function() {
            copyButton.innerHTML = '<i class="far fa-copy"></i>';
            copyButton.classList.remove('copied');
          }, 2000);
        }).catch(function(err) {
          console.error('복사 실패:', err);
          copyButton.innerHTML = '<i class="fas fa-times"></i>';
          setTimeout(function() {
            copyButton.innerHTML = '<i class="far fa-copy"></i>';
          }, 2000);
        });
      });
      
      
      block.appendChild(copyButton);
    });
  });
</script>







<script async src="https://www.googletagmanager.com/gtag/js?id=G-3XN21838ZJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag("js", new Date());
  gtag("config", "G-3XN21838ZJ");
</script>
 
</body>
</html>
